import{J as e,D as t,bN as s,ay as n,gw as i,E as o,av as l,at as r,bE as a,aW as h,cg as c,F as d,dE as u,a7 as m,c as p,o as f,a as g,M as v,S as x,b as w,aw as b,H as C,d as y,t as S,aL as M,w as E,a5 as _,aq as z,aM as O,ad as I,aa as k,L as F,P as A,K as L,a6 as T,W as R,G as W,aR as j,qH as D}from"./pxHhHUe5.js";import{u as H,f as q}from"./D1QVY1FE.js";import{u as N}from"./BkbEpA73.js";const P="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5673_16705)'%3e%3cpath%20d='M11.6338%205.11317L10.7455%204.22488C10.7027%204.18326%2010.6686%204.13351%2010.6452%204.07855C10.6219%204.02358%2010.6097%203.9645%2010.6095%203.90478V2.64037C10.6091%202.3094%2010.4774%201.9921%2010.2434%201.75806C10.0094%201.52403%209.69205%201.39237%209.36108%201.39197H8.09667C8.03695%201.39171%207.97788%201.37955%207.92292%201.35619C7.86796%201.33283%207.8182%201.29874%207.77657%201.25593L6.88829%200.367642C6.65211%200.13317%206.3328%200.00158691%206%200.00158691C5.6672%200.00158691%205.34789%200.13317%205.11171%200.367642L4.22343%201.25593C4.18179%201.29874%204.13204%201.33283%204.07708%201.35619C4.02211%201.37955%203.96305%201.39171%203.90332%201.39197H2.63892C2.30794%201.39237%201.99064%201.52403%201.75661%201.75806C1.52257%201.9921%201.39092%202.3094%201.39052%202.64037V3.90478C1.39028%203.9645%201.37813%204.02358%201.35476%204.07855C1.3314%204.13351%201.29731%204.18326%201.25447%204.22488L0.366186%205.11317C0.131636%205.34931%200%205.66863%200%206.00146C0%206.33428%200.131636%206.6536%200.366186%206.88974L1.25447%207.77803C1.29731%207.81965%201.3314%207.8694%201.35476%207.92436C1.37813%207.97933%201.39028%208.03841%201.39052%208.09813V9.36254C1.39092%209.69351%201.52257%2010.0108%201.75661%2010.2448C1.99064%2010.4789%202.30794%2010.6105%202.63892%2010.6109H3.90332C3.96305%2010.6112%204.02211%2010.6234%204.07708%2010.6467C4.13204%2010.6701%204.18179%2010.7042%204.22343%2010.747L5.11171%2011.6353C5.22833%2011.752%205.36681%2011.8446%205.51923%2011.9077C5.67164%2011.9709%205.83501%2012.0034%206%2012.0034C6.16499%2012.0034%206.32836%2011.9709%206.48077%2011.9077C6.63319%2011.8446%206.77167%2011.752%206.88829%2011.6353L7.77657%2010.747C7.8182%2010.7042%207.86796%2010.6701%207.92292%2010.6467C7.97788%2010.6234%208.03695%2010.6112%208.09667%2010.6109H9.36108C9.69205%2010.6105%2010.0094%2010.4789%2010.2434%2010.2448C10.4774%2010.0108%2010.6091%209.69351%2010.6095%209.36254V8.09813C10.6097%208.03841%2010.6219%207.97933%2010.6452%207.92436C10.6686%207.8694%2010.7027%207.81965%2010.7455%207.77803L11.6338%206.88974C11.8684%206.6536%2012%206.33428%2012%206.00146C12%205.66863%2011.8684%205.34931%2011.6338%205.11317ZM7.88061%205.2172L5.75192%207.35389C5.67489%207.42599%205.57333%207.4661%205.46783%207.4661C5.36232%207.4661%205.26077%207.42599%205.18374%207.35389L4.11939%206.28155C4.04635%206.20701%204.00566%206.10665%204.00619%206.00228C4.00672%205.89792%204.04841%205.79798%204.12221%205.72418C4.19601%205.65038%204.29595%205.60869%204.40031%205.60816C4.50468%205.60764%204.60503%205.64832%204.67957%205.72137L5.46383%206.50562L7.32042%204.64902C7.39533%204.57591%207.49585%204.53499%207.60051%204.53499C7.70518%204.53499%207.8057%204.57591%207.88061%204.64902C7.91861%204.68593%207.94882%204.7301%207.96945%204.77889C7.99008%204.82769%208.00071%204.88013%208.00071%204.93311C8.00071%204.98609%207.99008%205.03853%207.96945%205.08733C7.94882%205.13613%207.91861%205.18029%207.88061%205.2172Z'%20fill='%231C9BEF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_5673_16705'%3e%3crect%20width='12'%20height='12'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function V(e,t,s){let n,i=s.initialDeps??[],o=!0;function l(){var l,r,a;let h;s.key&&(null==(l=s.debug)?void 0:l.call(s))&&(h=Date.now());const c=e();if(!(c.length!==i.length||c.some((e,t)=>i[t]!==e)))return n;let d;if(i=c,s.key&&(null==(r=s.debug)?void 0:r.call(s))&&(d=Date.now()),n=t(...c),s.key&&(null==(a=s.debug)?void 0:a.call(s))){Math.round(100*(Date.now()-h)),Math.round(100*(Date.now()-d))}return!(null==s?void 0:s.onChange)||o&&s.skipInitialOnChange||s.onChange(n),o=!1,n}return l.updateDeps=e=>{i=e},l}function $(e,t){if(void 0===e)throw new Error("Unexpected undefined");return e}const B=(e,t,s)=>{let n;return function(...i){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,i),s)}},K=e=>{const{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},U=e=>e,Y=e=>{const t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let i=t;i<=s;i++)n.push(i);return n},Z=(e,t)=>{const s=e.scrollElement;if(!s)return;const n=e.targetWindow;if(!n)return;const i=e=>{const{width:s,height:n}=e;t({width:Math.round(s),height:Math.round(n)})};if(i(K(s)),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(t=>{const n=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i(K(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()});return o.observe(s,{box:"border-box"}),()=>{o.unobserve(s)}},G={passive:!0},J="undefined"==typeof window||"onscrollend"in window,Q=(e,t)=>{const s=e.scrollElement;if(!s)return;const n=e.targetWindow;if(!n)return;let i=0;const o=e.options.useScrollendEvent&&J?()=>{}:B(n,()=>{t(i,!1)},e.options.isScrollingResetDelay),l=n=>()=>{const{horizontal:l,isRtl:r}=e.options;i=l?s.scrollLeft*(r?-1:1):s.scrollTop,o(),t(i,n)},r=l(!0),a=l(!1);s.addEventListener("scroll",r,G);const h=e.options.useScrollendEvent&&J;return h&&s.addEventListener("scrollend",a,G),()=>{s.removeEventListener("scroll",r),h&&s.removeEventListener("scrollend",a)}},X=(e,t,s)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[s.options.horizontal?"inlineSize":"blockSize"])}}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},ee=(e,{adjustments:t=0,behavior:s},n)=>{var i,o;const l=e+t;null==(o=null==(i=n.scrollElement)?void 0:i.scrollTo)||o.call(i,{[n.options.horizontal?"left":"top"]:l,behavior:s})};class te{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var s;null==(s=t())||s.disconnect(),e=null},observe:e=>{var s;return null==(s=t())?void 0:s.observe(e,{box:"border-box"})},unobserve:e=>{var s;return null==(s=t())?void 0:s.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{void 0===s&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:U,rangeExtractor:Y,onChange:()=>{},measureElement:X,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,s;null==(s=(t=this.options).onChange)||s.call(t,this,e)},this.maybeNotify=V(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const s=new Map,n=new Map;for(let i=t-1;i>=0;i--){const t=e[i];if(s.has(t.lane))continue;const o=n.get(t.lane);if(null==o||t.end>o.end?n.set(t.lane,t):t.end<o.end&&s.set(t.lane,!0),s.size===this.options.lanes)break}return n.size===this.options.lanes?Array.from(n.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=V(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,t,s,n,i,o)=>(void 0!==this.prevLanes&&this.prevLanes!==o&&(this.lanesChangedFlag=!0),this.prevLanes=o,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:n,enabled:i,lanes:o}),{key:!1}),this.getMeasurements=V(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:n,enabled:i,lanes:o},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const c of this.laneAssignments.keys())c>=e&&this.laneAssignments.delete(c);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),0!==this.measurementsCache.length||this.lanesSettling||(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const r=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const a=this.measurementsCache.slice(0,r),h=new Array(o).fill(void 0);for(let c=0;c<r;c++){const e=a[c];e&&(h[e.lane]=c)}for(let c=r;c<e;c++){const e=n(c),i=this.laneAssignments.get(c);let o,r;if(void 0!==i&&this.options.lanes>1){o=i;const e=h[o],n=void 0!==e?a[e]:void 0;r=n?n.end+this.options.gap:t+s}else{const e=1===this.options.lanes?a[c-1]:this.getFurthestMeasurement(a,c);r=e?e.end+this.options.gap:t+s,o=e?e.lane:c%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(c,o)}const d=l.get(e),u="number"==typeof d?d:this.options.estimateSize(c),m=r+u;a[c]={index:c,start:r,size:u,end:m,key:e,lane:o},h[o]=c}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=V(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,s,n)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:s,lanes:n}){const i=e.length-1,o=t=>e[t].start;if(e.length<=n)return{startIndex:0,endIndex:i};let l=se(0,i,o,s),r=l;if(1===n)for(;r<i&&e[r].end<s+t;)r++;else if(n>1){const o=Array(n).fill(0);for(;r<i&&o.some(e=>e<s+t);){const t=e[r];o[t.lane]=t.end,r++}const a=Array(n).fill(s+t);for(;l>=0&&a.some(e=>e>=s);){const t=e[l];a[t.lane]=t.start,l--}l=Math.max(0,l-l%n),r=Math.min(i,r+(n-1-r%n))}return{startIndex:l,endIndex:r}}({measurements:e,outerSize:t,scrollOffset:s,lanes:n}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=V(()=>{let e=null,t=null;const s=this.calculateRange();return s&&(e=s.startIndex,t=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,s,n,i)=>null===n||null===i?[]:e({startIndex:n,endIndex:i,overscan:t,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):-1},this._measureElement=(e,t)=>{const s=this.indexFromElement(e),n=this.measurementsCache[s];if(!n)return;const i=n.key,o=this.elementsCache.get(i);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const s=this.measurementsCache[e];if(!s)return;const n=t-(this.itemSizeCache.get(s.key)??s.size);0!==n&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(s,n,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=n,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=V(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const s=[];for(let n=0,i=e.length;n<i;n++){const i=t[e[n]];s.push(i)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return $(t[se(0,t.length-1,e=>$(t[e]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,t,s=0)=>{if(!this.scrollElement)return 0;const n=this.getSize(),i=this.getScrollOffset();"auto"===t&&(t=e>=i+n?"end":"start"),"center"===t?e+=(s-n)/2:"end"===t&&(e-=n);const o=this.getMaxScrollOffset();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=this.measurementsCache[e];if(!s)return;const n=this.getSize(),i=this.getScrollOffset();if("auto"===t)if(s.end>=i+n-this.options.scrollPaddingEnd)t="end";else{if(!(s.start<=i+this.options.scrollPaddingStart))return[i,t];t="start"}if("end"===t&&e===this.options.count-1)return[this.getMaxScrollOffset(),t];const o="end"===t?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,s.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode(),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode(),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let n=0;const i=t=>{if(!this.targetWindow)return;const n=this.getOffsetForIndex(e,t);if(!n)return;const[i,l]=n;this._scrollToOffset(i,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const t=()=>{if(this.currentScrollToIndex!==e)return;const t=this.getScrollOffset(),s=this.getOffsetForIndex(e,l);var n,i;s&&(n=s[0],i=t,Math.abs(n-i)<1.01||o(l))};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(t):t()})},o=t=>{this.targetWindow&&this.currentScrollToIndex===e&&(n++,n<10&&this.targetWindow.requestAnimationFrame(()=>i(t)))};i(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode(),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;if(0===t.length)s=this.options.paddingStart;else if(1===this.options.lanes)s=(null==(e=t[t.length-1])?void 0:e.end)??0;else{const e=Array(this.options.lanes).fill(null);let n=t.length-1;for(;n>=0&&e.some(e=>null===e);){const s=t[n];null===e[s.lane]&&(e[s.lane]=s.end),n--}s=Math.max(...e.filter(e=>null!==e))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(e)}}const se=(e,t,s,n)=>{for(;e<=t;){const i=(e+t)/2|0,o=s(i);if(o<n)e=i+1;else{if(!(o>n))return i;t=i-1}}return e>0?e-1:0};function ne(l){return function(o){const l=new te(e(o)),r=n(l),a=l._didMount();return t(()=>e(o).getScrollElement(),e=>{e&&l._willUpdate()},{immediate:!0}),t(()=>e(o),e=>{l.setOptions({...e,onChange:(t,n)=>{var i;s(r),null==(i=e.onChange)||i.call(e,t,n)}}),l._willUpdate(),s(r)},{immediate:!0}),i(a),r}(o(()=>({observeElementRect:Z,observeElementOffset:Q,scrollToFn:ee,...e(l)})))}const ie={tweet:1,retweet:3,quote:2,reply:4},oe=()=>{const{t:e}=l();return{arr:o(()=>[{label:e("tweet"),value:ie.tweet},{label:e("retweet"),value:ie.retweet},{label:e("quote"),value:ie.quote},{label:e("reply"),value:ie.reply}]),map:o(()=>({[ie.tweet]:{label:e("tweet"),bg:"#13C2C21A",color:"#13C2C2"},[ie.retweet]:{label:e("retweet"),bg:"rgba(255, 166, 34, 0.10)",color:"#FFA622"},[ie.quote]:{label:e("quote"),bg:"rgba(129, 64, 241, 0.10)",color:"#8140F1"},[ie.reply]:{label:e("reply"),bg:"rgba(0, 197, 128, 0.10)",color:"#00C580"}}))}},le={class:"pb-16px"},re={class:"flex flex-col gap-8px flex-1 min-w-0"},ae={class:"justify-between items-center flex"},he={class:"min-w-0 flex-1"},ce={class:"min-w-0 flex-1 flex items-center gap-7px"},de={class:"flex-1 min-w-0"},ue={class:"gap-8px flex items-center min-w-0"},me={key:0,width:12,src:P,alt:""},pe={class:"color-[--up-color] text-12px"},fe={key:2,class:"color-[--up-color] text-12px"},ge={class:"text-12px color-[--secondary-text]"},ve={key:0,class:"gap-8px flex items-center"},xe=["innerHTML"],we=["innerHTML"],be=["src"],Ce=["src","onLoad"],ye={key:1},Se=["srcdoc"],Me={__name:"listItem",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["measureElement"],setup(s,{emit:n}){const i=n,P=N(),{map:V}=oe(),{t:$}=l(),B=r(),K=s,U=d({}),Y=d(null),Z=d(null),G=d(!1),J=d(!1),Q=a("twFollowIds",[]),X=d(!1),ee=o(()=>{var e,t;const{lang:s}=K.item||{},n="en"===s?"content_zh":"content_en";return(null==(e=K.item)?void 0:e[n])&&(null==(t=K.item)?void 0:t[n])!==K.item.content}),te=o(()=>{var e;const{lang:t}=K.item||{};let s=`content_${t}`;X.value&&(s="en"===t?"content_zh":"content_en");const n=null==(e=K.item)?void 0:e[s];return D(n||K.item.content)}),se=()=>{W(()=>{const e=Z.value||Y.value;if(!e)return;const t=11*(parseFloat(getComputedStyle(e).lineHeight)||22);J.value=e.scrollHeight>t+1})};h(()=>{se(),window.addEventListener("resize",se)}),c(()=>{window.removeEventListener("resize",se),U.value={}}),t(()=>{var e;return[null==(e=K.item)?void 0:e.content,X.value]},()=>{se()},{immediate:!0});const ne=u("twitter_author_id"),Me=e=>{ne.value=e},Ee=e=>{var t,s,n,i;return null==(i=null==(n=null==(s=null==(t=e.video_info)?void 0:t.variants)?void 0:s.find)?void 0:n.call(s,e=>"video/mp4"===e.content_type))?void 0:i.url},_e=e=>{const t=U.value[e];t&&W(()=>{if(t.updatePopper)t.updatePopper();else if(t.popperInstance)t.popperInstance.update();else if(t.$&&t.$.exposed){const e=t.$.exposed;e.updatePopper&&e.updatePopper()}requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})})},ze=e=>{var t;"A"!==e.target.tagName&&(t=K.item.url,window.open(t))};return(t,n)=>{var o,l,r,a,h;const c=b,d=O,u=k,D=R,N=m("tooltip");return f(),p("div",le,[g("div",re,[g("div",ae,[g("div",he,[g("div",ce,[w(c,{"icon-size":"32px",class:"cursor-pointer",wallet_logo:{logo:s.item.author.profile_pic,name:s.item.author.name},onClick:n[0]||(n[0]=e=>Me(s.item.author.author_id))},null,8,["wallet_logo"]),g("div",de,[g("div",ue,[v((f(),p("span",{class:"color-[--main-text] text-16px lh-20px min-w-0 max-w-[calc(100%-80px)] truncate cursor-pointer",onClick:n[1]||(n[1]=e=>Me(s.item.author.author_id))},[y(S(s.item.author.name),1)])),[[N,s.item.author.name]]),s.item.verified?(f(),p("img",me)):x("",!0),s.item.created_at&&Number(("formatTimeFromNow"in t?t.formatTimeFromNow:e(M))(s.item.created_at,!0))<60?(f(),C(d,{key:`${s.item.created_at}`,timestamp:Math.min(+s.item.created_at,e(z)().unix()-1),"end-time":60},{default:E(({seconds:n})=>[g("span",pe,[n<60?(f(),p(_,{key:0},[y(S(n)+"s ",1)],64)):(f(),p(_,{key:1},[y(S(("formatTimeFromNow"in t?t.formatTimeFromNow:e(M))(s.item.created_at)),1)],64))])]),_:1},8,["timestamp"])):v((f(),p("span",fe,[y(S(("formatTimeFromNow"in t?t.formatTimeFromNow:e(M))(s.item.created_at)),1)])),[[N,("formatDate"in t?t.formatDate:e(I))(s.item.created_at,"YYYY-MM-DD HH:mm:ss")]])]),g("div",ge,"@"+S(s.item.author.username),1)])])]),-1!==s.index?(f(),p("div",ve,[g("div",{class:"w-24px h-24px bg-[--main-list-hover] rounded-4px flex items-center justify-center cursor-pointer",onClick:n[2]||(n[2]=e=>1===s.item.author.follow_status?(async(e,t)=>{try{await H(e),j.success($("cancelFollowed")),P.list[t].author.follow_status=0,Q.value=Q.value.filter(t=>t.author_id!==e)}catch(s){j.error($("failed"))}})(s.item.author.author_id,s.index):(async(e,t)=>{try{if(!B.accessToken)return void B.changeConnectVisible(!0);if(Q.value.length>=50)return void j.error($("twitterMax"));await q(e),j.success($("followed")),P.list[t].author.follow_status=1,Q.value=Q.value.concat({author_id:e})}catch(s){j.error($("failed"))}})(s.item.author.author_id,s.index))},[w(u,{name:1===s.item.author.follow_status?"custom:twitter-collect":"custom:twitter-uncollect",class:"text-12px"},null,8,["name"])]),g("div",{class:"flex items-center gap-4px py-6px px-4px rounded-4px text-12px",style:F({background:null==(o=e(V)[s.item.type])?void 0:o.bg,color:null==(l=e(V)[s.item.type])?void 0:l.color})},[w(u,{name:`custom:twitter-${s.item.type}`,class:"text-13px"},null,8,["name"]),y(" "+S(null==(r=e(V)[s.item.type])?void 0:r.label),1)],4)])):x("",!0)]),v(g("div",{class:L(["relative",-1!==s.index?"ml-40px":""])},[g("div",{ref_key:"contentEl",ref:Y,class:L(["text-14px lh-22px break-words",{"line-11":!e(G)&&e(J)}])},[g("div",{class:"cursor-pointer",onClick:ze,innerHTML:e(te)},null,8,xe)],2),g("div",{ref_key:"measureEl",ref:Z,class:"text-14px lh-22px break-words absolute opacity-0 pointer-events-none",style:{width:"100%",top:"0",left:"0","z-index":"-1"},innerHTML:e(te)},null,8,we)],2),[[A,+K.item.type!==e(ie).retweet]]),(f(!0),p(_,null,T(null==(h=null==(a=s.item.medias)?void 0:a.slice)?void 0:h.call(a,0,1),(t,n)=>(f(),p("div",{key:n,class:L([-1!==s.index?"ml-40px":"","relative"])},["video"!==t.type?(f(),C(D,{key:0,ref_for:!0,ref:t=>{t&&(e(U)[`${n}`]=t)},"popper-class":"tooltip-pd-0","show-arrow":!1,placement:"right",persistent:!1,"popper-options":{modifiers:[{name:"eventListeners",options:{scroll:!0,resize:!0}}]},onShow:e=>(e=>{W(()=>{_e(e)})})(n)},{default:E(()=>[g("img",{src:t.media_url_https||t.url,alt:"",class:"w-full max-h-300px rounded-8px object-cover"},null,8,be)]),content:E(()=>[g("img",{src:t.media_url_https||t.url,alt:"",class:"max-w-50vw max-h-50vh object-cover rounded-8px",onLoad:e=>(e=>{i("measureElement"),W(()=>{_e(e)})})(n)},null,40,Ce)]),_:2},1032,["onShow"])):(f(),p("div",ye,[g("iframe",{class:"w-full",style:{border:"none",cursor:"pointer",height:"auto","aspect-ratio":"16 / 9","max-height":"320px"},srcdoc:`\n                     <html>\n                        <style>\n                            video {\n                                width: 100%;\n                                height: auto;\n                                aspect-ratio: 16 / 9;\n                                max-height: 320px;\n                            }\n                            html, body {\n                                margin: 0;\n                                padding: 0;\n                                overflow:hidden;\n                            }\n                        </style>\n                        <meta name="referrer" content="no-referrer" />\n                        <video poster=${t.media_url_https} src=${Ee(t)} controls \n                        />\n                     </html>\n                     `,frameborder:"0",allowfullscreen:"",referrerpolicy:"no-referrer"},null,8,Se)]))],2))),128)),+K.item.type!==e(ie).retweet?(f(),p("div",{key:0,class:L([-1!==s.index?"ml-40px":"","justify-between items-center flex"])},[v(g("div",{class:"flex items-center gap-4px cursor-pointer text-12px color-[--secondary-text]",onClick:n[3]||(n[3]=t=>X.value=!e(X))},[K.item.content?(f(),p(_,{key:0},[w(u,{name:"custom:translation"}),y(S(e($)(e(X)?"viewOrigin":"viewTranslation")),1)],64)):x("",!0)],512),[[A,e(ee)]]),e(J)?(f(),p("span",{key:0,class:"flex items-center gap-4px cursor-pointer color-[--primary-color] text-12px",onClick:n[4]||(n[4]=t=>G.value=!e(G))},[w(u,{name:"custom:angle-down",class:L(e(G)?"rotate-180":"")},null,8,["class"]),y(" "+S(e(G)?e($)("Collapse"):e($)("Expand")),1)])):x("",!0)],2)):x("",!0)])])}}};export{P as _,Me as a,oe as b,ne as u};

import{n as e,at as a,a2 as t,bE as l,cc as i,D as s,oP as n,dL as o,E as r,cd as c,aW as u,dw as m,dr as p,a7 as h,c as d,o as b,b as f,w as v,a as x,L as g,J as y,M as w,aa as F,al as S,F as N,t as k,T as j,d as _,S as $,a8 as L,K as z,dl as B,aP as C,a5 as U,ac as A,_ as H}from"./pxHhHUe5.js";import{_ as M}from"./CxWYx9-y.js";import{_ as T}from"./X1MX9tB7.js";import{p as W,P as D}from"./C62g95YL.js";import{_ as P}from"./BJfZvCNv.js";import"./b94L9vb_.js";import"./DGdCcJ75.js";import"./B-rSTJlV.js";import"./BwPtREp8.js";import"./Ss6PgMLe.js";import"./D5SrGyNL.js";import"./uG3PizZo.js";const R=["src"],E={class:"w-full h-full py-12px flex flex-col relative group/item"},I={class:"flex relative justify-between items-center h-16px mb-10px px-12px"},O={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},V={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},G={class:"mt--26px flex-1 flex items-center justify-center"},J={key:0,class:"text-center"},K={class:"color-[--white] text-12px lh-18px mb-12px"},Z={key:1,class:"flex flex-1"},q={class:"flex-1 flex flex-col items-center"},Q={class:"flex-1 flex flex-col items-center"},X=H(e({__name:"pnlTracker",setup(e){const H=a(),X=t(),Y=l("pnlBoundingRect",{width:480,height:120,x:250,y:250}),ee=l("pnl-setting",{chain:"solana",background:W,blur:0,opacity:100,solUsdSwitch:!1,showU:!1}),ae=r(()=>{var e;return(null==(e=X.footerTokensPrice.find(e=>e.token===A(ee.value.chain).wmain_wrapper))?void 0:e.current_price_usd)||0}),te=l("pnlData",{solana:{initBalance:"0",balance:"0",historyList:[]},bsc:{initBalance:"0",balance:"0",historyList:[]}}),le=r(()=>"0"===ie.value.initBalance),ie=r(()=>te.value[ee.value.chain]),se=r(()=>Number(ie.value.balance)*ae.value),ne=r(()=>Number(ie.value.balance)-Number(ie.value.initBalance)),oe=r(()=>ne.value/Number(ie.value.initBalance)*100),re=i();s(()=>re.wsResult[c.ASSET],async e=>{const a=e.swap&&e.swap.token===n,t=e.transfer&&e.transfer.token===o&&"bsc"===e.transfer.chain;if(a||t){const{type:a,time:t,chain:l}=e.swap||e.transfer,i="0"===a,s=ie.value.balance,n=await fe(l,!1),o=te.value[l].historyList.slice();o.unshift({isBuy:i,amount:Number(n)-Number(s),time:t,balance:n});const r=o.length>50;te.value[l].historyList=r?o.slice(0,50):o}});const ce=r(()=>{var e;const a=null==(e=H.userInfo)?void 0:e.addresses;return Array.isArray(a)?Array.from(new Set(a.map(e=>e.address))):[]});s(()=>ce.value,(e,a)=>{var t;0===(null==a?void 0:a.length)&&e.length>0&&xe(),(null==(t=ce.value)?void 0:t.length)&&H.subBalanceChange()},{immediate:!0}),s(()=>ee.value.chain,e=>{te.value[e].historyList=[],fe(e,!0)});const ue=(e,a)=>{Y.value.x=e,Y.value.y=a},me=(e,a)=>{Y.value.width=e,Y.value.height=a},pe=r(()=>Math.min(Y.value.width/300,Y.value.height/100)),he=N(!1),de=N(!1);function be(){H.changeConnectVisible(!0)}async function fe(e,a=!1){const t=H.getWalletAddress(e);if(!t)return;const l=await m({chain:e,tokens:[p(e)],walletAddress:t}),i=(null==l?void 0:l[0])||{};return te.value[e].balance=i.balance,a&&(te.value[e].initBalance=i.balance),i.balance}function ve(e){return Number(e)>0?"color-[--up-color]":Number(e)<0?"color-[--down-color]":"color-[--white]"}function xe(){te.value[ee.value.chain].historyList=[],fe(ee.value.chain,!0)}return u(()=>{fe("solana",le.value)}),(e,a)=>{const t=F,l=j,i=M,s=T,n=h("tooltip");return b(),d(U,null,[f(s,{"class-name":"top-0 left-0 fixed draggable z-1000!",initialWidth:y(Y).width,"initial-height":y(Y).height,x:y(Y).x,y:y(Y).y,"min-width":300,"min-height":100,parent:!0,handles:["tl","tm","tr","mr","br","bm","bl","ml"],onOnDragStop:ue,onOnResizing:me},{default:v(()=>[x("img",{src:y(ee).background,alt:"background",class:"absolute top-0 left-0 w-full h-full object-cover",style:g({filter:`blur(${y(ee).blur}px) opacity(${y(ee).opacity}%)`})},null,12,R),x("div",E,[x("div",I,[x("div",O,[w(f(t,{name:"custom:pump-setting",class:"cursor-pointer text-12px color-#FFFFFF99",onClick:a[0]||(a[0]=S(e=>de.value=!0,["self"]))},null,512),[[n,e.$t("setting")]]),w(f(t,{name:"custom:history-fill",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:a[1]||(a[1]=S(e=>he.value=!0,["self"]))},null,512),[[n,e.$t("history")]])]),x("div",V,[w(f(t,{name:"custom:reset2",class:"cursor-pointer text-12px color-#FFFFFF99",onDblclick:S(xe,["self"])},null,512),[[n,e.$t("dbClickReset")]]),f(t,{name:"material-symbols:close",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:a[2]||(a[2]=S(e=>y(X).pnlTrackerVisible=!1,["self"]))})])]),x("div",G,[y(H).evmAddress?(b(),d("div",Z,[x("div",q,[x("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:g({fontSize:16*y(pe)+"px",lineHeight:20*y(pe)+"px"})},[f(i,{chain:y(ee).chain,width:16*y(pe)},null,8,["chain","width"]),_(" "+k(y(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:y(L))(y(se),1):("formatNumber"in e?e.formatNumber:y(L))(y(ie).balance,3)),1)],4),y(ee).showU?(b(),d("span",{key:0,class:"color-[--white] mb-2px",style:g({fontSize:10*y(pe)+"px",lineHeight:12*y(pe)+"px"})}," $"+k(("formatNumber"in e?e.formatNumber:y(L))(y(se),1)),5)):$("",!0),x("div",{class:"color-#FFFFFF99",style:g({fontSize:12*y(pe)+"px",lineHeight:16*y(pe)+"px"})},k(e.$t("balance1")),5)]),x("div",Q,[x("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:g({fontSize:16*y(pe)+"px",lineHeight:20*y(pe)+"px"})},[f(i,{chain:y(ee).chain,width:16*y(pe)},null,8,["chain","width"]),x("span",{class:z(ve(y(ne)))},k(("addSign"in e?e.addSign:y(B))(y(ne)))+k(y(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:y(L))(Math.abs(y(ne)*y(ae)),1):("formatNumber"in e?e.formatNumber:y(L))(Math.abs(y(ne)),3)),3)],4),y(ee).showU?(b(),d("span",{key:0,class:z(["mb-2px",ve(y(ne))]),style:g({fontSize:10*y(pe)+"px",lineHeight:12*y(pe)+"px"})},k(("addSign"in e?e.addSign:y(B))(y(ne)))+"$"+k(("formatNumber"in e?e.formatNumber:y(L))(Math.abs(y(ne)*y(ae)),1)),7)):$("",!0),x("div",{class:z(ve(y(ne))),style:g({fontSize:12*y(pe)+"px",lineHeight:16*y(pe)+"px"})},k(("addSign"in e?e.addSign:y(B))(y(ne)))+k(("formatNumber"in e?e.formatNumber:y(L))(Math.abs(y(oe)),1))+"% ",7)])])):(b(),d("div",J,[x("div",K,k(e.$t("notLogin")),1),f(l,{size:"small",class:"[&&]:[--el-button-border-color:--white] [&&]:[--el-button-hover-text-color:--white] [&&]:[--el-button-hover-border-color:--white] [&&]:[--el-button-hover-bg-color:transparent] [&&]:[--el-button-bg-color:transparent] [&&]:[--el-button-text-color:--white]",onClick:be},{default:v(()=>[_(k(e.$t("login")),1)]),_:1})]))])])]),_:1},8,["initialWidth","initial-height","x","y"]),f(D,{visible:y(de),"onUpdate:visible":a[3]||(a[3]=e=>C(de)?de.value=e:null),pnlSetting:y(ee),"onUpdate:pnlSetting":a[4]||(a[4]=e=>C(ee)?ee.value=e:null)},null,8,["visible","pnlSetting"]),f(P,{visible:y(he),"onUpdate:visible":a[5]||(a[5]=e=>C(he)?he.value=e:null),chain:y(ee).chain,list:y(ie).historyList,getColorClass:ve},null,8,["visible","chain","list"])],64)}}}),[["__scopeId","data-v-32ca99aa"]]);export{X as default};

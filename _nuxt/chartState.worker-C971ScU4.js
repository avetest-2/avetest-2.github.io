!function(){"use strict";
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   */const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,i=new Map([["proxy",{canHandle:t=>a(t)&&t[e],serialize(e){const{port1:t,port2:r}=new MessageChannel;return c(e,t),[r,[r]]},deserialize:e=>(e.start(),function(e,t){const r=new Map;return e.addEventListener("message",function(e){const{data:t}=e;if(!t||!t.id)return;const n=r.get(t.id);if(n)try{n(t)}finally{r.delete(t.id)}}),v(e,r,[],t)}(e))}],["throw",{canHandle:e=>a(e)&&o in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function c(t,r=globalThis,a=["*"]){r.addEventListener("message",function i(s){if(!s||!s.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(a,s.origin))return;const{id:f,type:l,path:d}=Object.assign({path:[]},s.data),v=(s.data.argumentList||[]).map(b);let h;try{const r=d.slice(0,-1).reduce((e,t)=>e[t],t),n=d.reduce((e,t)=>e[t],t);switch(l){case"GET":h=n;break;case"SET":r[d.slice(-1)[0]]=b(s.data.value),h=!0;break;case"APPLY":h=n.apply(r,v);break;case"CONSTRUCT":h=function(t){return Object.assign(t,{[e]:!0})}(new n(...v));break;case"ENDPOINT":{const{port1:e,port2:r}=new MessageChannel;c(t,r),h=function(e,t){return p.set(e,t),e}(e,[e])}break;case"RELEASE":h=void 0;break;default:return}}catch(g){h={value:g,[o]:0}}Promise.resolve(h).catch(e=>({value:e,[o]:0})).then(e=>{const[o,a]=y(e);r.postMessage(Object.assign(Object.assign({},o),{id:f}),a),"RELEASE"===l&&(r.removeEventListener("message",i),u(r),n in t&&"function"==typeof t[n]&&t[n]())}).catch(e=>{const[t,n]=y({value:new TypeError("Unserializable return value"),[o]:0});r.postMessage(Object.assign(Object.assign({},t),{id:f}),n)})}),r.start&&r.start()}function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function s(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e){return g(e,new Map,{type:"RELEASE"}).then(()=>{u(e)})}const l=new WeakMap,d="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(l.get(e)||0)-1;l.set(e,t),0===t&&f(e)});function v(e,n,o=[],a=function(){}){let i=!1;const c=new Proxy(a,{get(t,a){if(s(i),a===r)return()=>{!function(e){d&&d.unregister(e)}(c),f(e),n.clear(),i=!0};if("then"===a){if(0===o.length)return{then:()=>c};const t=g(e,n,{type:"GET",path:o.map(e=>e.toString())}).then(b);return t.then.bind(t)}return v(e,n,[...o,a])},set(t,r,a){s(i);const[c,u]=y(a);return g(e,n,{type:"SET",path:[...o,r].map(e=>e.toString()),value:c},u).then(b)},apply(r,a,c){s(i);const u=o[o.length-1];if(u===t)return g(e,n,{type:"ENDPOINT"}).then(b);if("bind"===u)return v(e,n,o.slice(0,-1));const[f,l]=h(c);return g(e,n,{type:"APPLY",path:o.map(e=>e.toString()),argumentList:f},l).then(b)},construct(t,r){s(i);const[a,c]=h(r);return g(e,n,{type:"CONSTRUCT",path:o.map(e=>e.toString()),argumentList:a},c).then(b)}});return function(e,t){const r=(l.get(t)||0)+1;l.set(t,r),d&&d.register(e,t,e)}(c,e),c}function h(e){const t=e.map(y);return[t.map(e=>e[0]),(r=t.map(e=>e[1]),Array.prototype.concat.apply([],r))];var r}const p=new WeakMap;function y(e){for(const[t,r]of i)if(r.canHandle(e)){const[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},p.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return i.get(e.name).deserialize(e.value);case"RAW":return e.value}}function g(e,t,r,n){return new Promise(o=>{const a=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(a,o),e.start&&e.start(),e.postMessage(Object.assign({id:a},r),n)})}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function j(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var w,S={exports:{}};
/*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  */var I=(w||(w=1,S.exports=function e(t,r,n){function o(i,c){if(!r[i]){if(!t[i]){if(!c&&j)return j(i);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var s=r[i]={exports:{}};t[i][0].call(s.exports,function(e){var r=t[i][1][e];return o(r||e)},s,s.exports,e,t,r,n)}return r[i].exports}for(var a=j,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){(function(e){var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,i=new o(f),c=e.document.createTextNode("");i.observe(c,{characterData:!0}),r=function(){c.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var u=new e.MessageChannel;u.port1.onmessage=f,r=function(){u.port2.postMessage(0)}}var s=[];function f(){var e,t;n=!0;for(var r=s.length;r;){for(t=s,s=[],e=-1;++e<r;)t[e]();r=s.length}n=!1}function l(e){1!==s.push(e)||n||r()}t.exports=l}).call(this,void 0!==m?m:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var a={},i=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&v(this,e)}function f(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,t,r){n(function(){var n;try{n=t(r)}catch(o){return a.reject(e,o)}n===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,n)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function v(e,t){var r=!1;function n(t){r||(r=!0,a.reject(e,t))}function o(t){r||(r=!0,a.resolve(e,t))}function i(){t(o,n)}var c=h(i);"error"===c.status&&n(c.value)}function h(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function p(e){return e instanceof this?e:a.resolve(new this(o),e)}function y(e){var t=new this(o);return a.reject(t,e)}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),c=0,u=-1,s=new this(o);++u<r;)f(e[u],u);return s;function f(e,o){function u(e){i[o]=e,++c!==r||n||(n=!0,a.resolve(s,i))}t.resolve(e).then(u,function(e){n||(n=!0,a.reject(s,e))})}}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=-1,c=new this(o);++i<r;)u(e[i]);return c;function u(e){t.resolve(e).then(function(e){n||(n=!0,a.resolve(c,e))},function(e){n||(n=!0,a.reject(c,e))})}}t.exports=s,s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===i)return this;var r=new this.constructor(o);return this.state!==u?l(r,this.state===c?e:t,this.outcome):this.queue.push(new f(r,e,t)),r},f.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){a.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=h(d,t);if("error"===r.status)return a.reject(e,r.value);var n=r.value;if(n)v(e,n);else{e.state=c,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},a.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},s.resolve=p,s.reject=y,s.all=b,s.race=g},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==m?m:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var i=a();function c(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function d(e){return"string"!=typeof e&&(e=String(e)),e}function v(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",p=void 0,y={},b=Object.prototype.toString,g="readonly",m="readwrite";function _(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function j(e){return new s(function(t){var r=e.transaction(h,m),n=u([""]);r.objectStore(h).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function w(e){return"boolean"==typeof p?s.resolve(p):j(e).then(function(e){return p=e})}function S(e){var t=y[e.name],r={};r.promise=new s(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function I(e){var t=y[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var r=y[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function O(e,t){return new s(function(r,n){if(y[e.name]=y[e.name]||M(),e.db){if(!t)return r(e.db);S(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},r(t),I(e)}})}function A(e){return O(e,!1)}function N(e){return O(e,!0)}function x(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version,e.version=e.db.version),o||r){if(r){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function R(e){return new s(function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}function D(e){return u([_(atob(e.data))],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,r=t._initReady().then(function(){var e=y[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(r,e,e),r}function C(e){S(e);for(var t=y[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,A(e).then(function(t){return e.db=t,x(e)?N(e):t}).then(function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n}).catch(function(t){throw E(e,t),t})}function B(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(a){if(n>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return s.resolve().then(function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),N(e)}).then(function(){return C(e).then(function(){B(e,t,r,n-1)})}).catch(r);r(a)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=y[r.name];o||(o=M(),y[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k);var a=[];function i(){return s.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&a.push(u._initReady().catch(i))}var f=o.forages.slice(0);return s.all(a).then(function(){return r.db=o.db,A(r)}).then(function(e){return r.db=e,x(r,t._defaultConfig.version)?N(r):e}).then(function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<f.length;n++){var a=f[n];a!==t&&(a._dbInfo.db=r.db,a._dbInfo.version=r.version)}})}function P(e,t){var r=this;e=d(e);var n=new s(function(t,n){r.ready().then(function(){B(r._dbInfo,g,function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),T(e)&&(e=D(e)),t(e)},i.onerror=function(){n(i.error)}}catch(c){n(c)}})}).catch(n)});return f(n,t),n}function F(e,t){var r=this,n=new s(function(t,n){r.ready().then(function(){B(r._dbInfo,g,function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).openCursor(),c=1;i.onsuccess=function(){var r=i.result;if(r){var n=r.value;T(n)&&(n=D(n));var o=e(n,r.key,c++);void 0!==o?t(o):r.continue()}else t()},i.onerror=function(){n(i.error)}}catch(u){n(u)}})}).catch(n)});return f(n,t),n}function L(e,t,r){var n=this;e=d(e);var o=new s(function(r,o){var a;n.ready().then(function(){return a=n._dbInfo,"[object Blob]"===b.call(t)?w(a.db).then(function(e){return e?t:R(t)}):t}).then(function(t){B(n._dbInfo,m,function(a,i){if(a)return o(a);try{var c=i.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=c.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),r(t)},i.onabort=i.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}catch(s){o(s)}})}).catch(o)});return f(o,r),o}function U(e,t){var r=this;e=d(e);var n=new s(function(t,n){r.ready().then(function(){B(r._dbInfo,m,function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){n(i.error)},a.onabort=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(c){n(c)}})}).catch(n)});return f(n,t),n}function W(e){var t=this,r=new s(function(e,r){t.ready().then(function(){B(t._dbInfo,m,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(i){r(i)}})}).catch(r)});return f(r,e),r}function q(e){var t=this,r=new s(function(e,r){t.ready().then(function(){B(t._dbInfo,g,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){r(a.error)}}catch(i){r(i)}})}).catch(r)});return f(r,e),r}function H(e,t){var r=this,n=new s(function(t,n){e<0?t(null):r.ready().then(function(){B(r._dbInfo,g,function(o,a){if(o)return n(o);try{var i=a.objectStore(r._dbInfo.storeName),c=!1,u=i.openKeyCursor();u.onsuccess=function(){var r=u.result;r?0===e||c?t(r.key):(c=!0,r.advance(e)):t(null)},u.onerror=function(){n(u.error)}}catch(s){n(s)}})}).catch(n)});return f(n,t),n}function V(e){var t=this,r=new s(function(e,r){t.ready().then(function(){B(t._dbInfo,g,function(n,o){if(n)return r(n);try{var a=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];a.onsuccess=function(){var t=a.result;t?(i.push(t.key),t.continue()):e(i)},a.onerror=function(){r(a.error)}}catch(c){r(c)}})}).catch(r)});return f(r,e),r}function G(e,t){t=v.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;if(e.name){var a=e.name===r.name&&o._dbInfo.db?s.resolve(o._dbInfo.db):A(e).then(function(t){var r=y[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t});n=e.storeName?a.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;S(e);var n=y[e.name],o=n.forages;t.close();for(var a=0;a<o.length;a++){var c=o[a];c._dbInfo.db=null,c._dbInfo.version=r}return new s(function(t,n){var o=i.open(e.name,r);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,I(r._dbInfo)}}).catch(function(t){throw(E(e,t)||s.resolve()).catch(function(){}),t})}}):a.then(function(t){S(e);var r=y[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new s(function(t,r){var n=i.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<n.length;t++)I(n[t]._dbInfo)}).catch(function(t){throw(E(e,t)||s.resolve()).catch(function(){}),t})})}else n=s.reject("Invalid arguments");return f(n,t),n}var K={_driver:"asyncStorage",_initStorage:z,_support:c(),iterate:F,getItem:P,setItem:L,removeItem:U,clear:W,length:q,key:H,keys:V,dropInstance:G};function $(){return"function"==typeof openDatabase}var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",Y=/^~~local_forage_type~([^~]+)~/,J="__lfsc__:",Z=J.length,ee="arbf",te="blob",re="si08",ne="ui08",oe="uic8",ae="si16",ie="si32",ce="ur16",ue="ui32",se="fl32",fe="fl64",le=Z+ee.length,de=Object.prototype.toString;function ve(e){var t,r,n,o,a,i=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var s=new ArrayBuffer(i),f=new Uint8Array(s);for(t=0;t<c;t+=4)r=Q.indexOf(e[t]),n=Q.indexOf(e[t+1]),o=Q.indexOf(e[t+2]),a=Q.indexOf(e[t+3]),f[u++]=r<<2|n>>4,f[u++]=(15&n)<<4|o>>2,f[u++]=(3&o)<<6|63&a;return s}function he(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Q[r[t]>>2],n+=Q[(3&r[t])<<4|r[t+1]>>4],n+=Q[(15&r[t+1])<<2|r[t+2]>>6],n+=Q[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function pe(e,t){var r="";if(e&&(r=de.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var n,o=J;e instanceof ArrayBuffer?(n=e,o+=ee):(n=e.buffer,"[object Int8Array]"===r?o+=re:"[object Uint8Array]"===r?o+=ne:"[object Uint8ClampedArray]"===r?o+=oe:"[object Int16Array]"===r?o+=ae:"[object Uint16Array]"===r?o+=ce:"[object Int32Array]"===r?o+=ie:"[object Uint32Array]"===r?o+=ue:"[object Float32Array]"===r?o+=se:"[object Float64Array]"===r?o+=fe:t(new Error("Failed to get type for BinaryArray"))),t(o+he(n))}else if("[object Blob]"===r){var a=new FileReader;a.onload=function(){var r=X+e.type+"~"+he(this.result);t(J+te+r)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(i){t(null,i)}}function ye(e){if(e.substring(0,Z)!==J)return JSON.parse(e);var t,r=e.substring(le),n=e.substring(Z,le);if(n===te&&Y.test(r)){var o=r.match(Y);t=o[1],r=r.substring(o[0].length)}var a=ve(r);switch(n){case ee:return a;case te:return u([a],{type:t});case re:return new Int8Array(a);case ne:return new Uint8Array(a);case oe:return new Uint8ClampedArray(a);case ae:return new Int16Array(a);case ce:return new Uint16Array(a);case ie:return new Int32Array(a);case ue:return new Uint32Array(a);case se:return new Float32Array(a);case fe:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}}var be={serialize:pe,deserialize:ye,stringToBuffer:ve,bufferToString:he};function ge(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function me(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new s(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction(function(o){ge(o,r,function(){t._dbInfo=r,e()},function(e,t){n(t)})},n)});return r.serializer=be,o}function _e(e,t,r,n,o,a){e.executeSql(r,n,o,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,c){c.rows.length?a(e,i):ge(e,t,function(){e.executeSql(r,n,o,a)},a)},a):a(e,i)},a)}function je(e,t){var r=this;e=d(e);var n=new s(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){_e(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return f(n,t),n}function we(e,t){var r=this,n=new s(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){_e(r,o,"SELECT * FROM "+o.storeName,[],function(r,n){for(var a=n.rows,i=a.length,c=0;c<i;c++){var u=a.item(c),s=u.value;if(s&&(s=o.serializer.deserialize(s)),void 0!==(s=e(s,u.key,c+1)))return void t(s)}t()},function(e,t){n(t)})})}).catch(n)});return f(n,t),n}function Se(e,t,r,n){var o=this;e=d(e);var a=new s(function(a,i){o.ready().then(function(){void 0===t&&(t=null);var c=t,u=o._dbInfo;u.serializer.serialize(t,function(t,s){s?i(s):u.db.transaction(function(r){_e(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){a(c)},function(e,t){i(t)})},function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void a(Se.apply(o,[e,c,r,n-1]));i(t)}})})}).catch(i)});return f(a,r),a}function Ie(e,t,r){return Se.apply(this,[e,t,r,1])}function Ee(e,t){var r=this;e=d(e);var n=new s(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){_e(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return f(n,t),n}function Oe(e){var t=this,r=new s(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){_e(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return f(r,e),r}function Ae(e){var t=this,r=new s(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){_e(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return f(r,e),r}function Ne(e,t){var r=this,n=new s(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){_e(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return f(n,t),n}function xe(e){var t=this,r=new s(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){_e(t,n,"SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)},function(e,t){r(t)})})}).catch(r)});return f(r,e),r}function Re(e){return new s(function(t,r){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(r,n){for(var o=[],a=0;a<n.rows.length;a++)o.push(n.rows.item(a).name);t({db:e,storeNames:o})},function(e,t){r(t)})},function(e){r(e)})})}function De(e,t){t=v.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return f(n=e.name?new s(function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Re(n))}).then(function(e){return new s(function(t,r){e.db.transaction(function(n){function o(e){return new s(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){r(t)})})}for(var a=[],i=0,c=e.storeNames.length;i<c;i++)a.push(o(e.storeNames[i]));s.all(a).then(function(){t()}).catch(function(e){r(e)})},function(e){r(e)})})}):s.reject("Invalid arguments"),t),n}var Te={_driver:"webSQLStorage",_initStorage:me,_support:$(),iterate:we,getItem:je,setItem:Ie,removeItem:Ee,clear:Oe,length:Ae,key:Ne,keys:xe,dropInstance:De};function ke(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ce(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Be(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Me(){return!Be()||localStorage.length>0}function ze(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ce(e,t._defaultConfig),Me()?(t._dbInfo=r,r.serializer=be,s.resolve()):s.reject()}function Pe(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return f(r,e),r}function Fe(e,t){var r=this;e=d(e);var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return f(n,t),n}function Le(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,a=localStorage.length,i=1,c=0;c<a;c++){var u=localStorage.key(c);if(0===u.indexOf(n)){var s=localStorage.getItem(u);if(s&&(s=t.serializer.deserialize(s)),void 0!==(s=e(s,u.substring(o),i++)))return s}}});return f(n,t),n}function Ue(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return f(n,t),n}function We(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var a=localStorage.key(o);0===a.indexOf(e.keyPrefix)&&n.push(a.substring(e.keyPrefix.length))}return n});return f(r,e),r}function qe(e){var t=this.keys().then(function(e){return e.length});return f(t,e),t}function He(e,t){var r=this;e=d(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return f(n,t),n}function Ve(e,t,r){var n=this;e=d(e);var o=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new s(function(o,a){var i=n._dbInfo;i.serializer.serialize(t,function(t,n){if(n)a(n);else try{localStorage.setItem(i.keyPrefix+e,t),o(r)}catch(c){"QuotaExceededError"!==c.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==c.name||a(c),a(c)}})})});return f(o,r),o}function Ge(e,t){if(t=v.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return f(n=e.name?new s(function(t){e.storeName?t(Ce(e,o._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}}):s.reject("Invalid arguments"),t),n}var Ke={_driver:"localStorageWrapper",_initStorage:ze,_support:ke(),iterate:Le,getItem:Fe,setItem:Ve,removeItem:He,clear:Pe,length:qe,key:Ue,keys:We,dropInstance:Ge},$e=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Qe=function(e,t){for(var r=e.length,n=0;n<r;){if($e(e[n],t))return!0;n++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},Je={},Ze={INDEXEDDB:K,WEBSQL:Te,LOCALSTORAGE:Ke},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function at(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Xe(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var it=function(){function e(t){for(var r in o(this,e),Ze)if(Ze.hasOwnProperty(r)){var n=Ze[r],a=n._driver;this[r]=a,Ye[a]||this.defineDriver(n)}this._defaultConfig=at({},nt),this._config=at({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new s(function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var a=rt.concat("_initStorage"),i=0,c=a.length;i<c;i++){var u=a[i];if((!Qe(tt,u)||e[u])&&"function"!=typeof e[u])return void r(o)}var l=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=s.reject(t);return f(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var o=tt[r];e[o]||(e[o]=t(o))}};l();var d=function(r){Ye[n],Ye[n]=e,Je[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,r):d(!!e._support):d(!0)}catch(v){r(v)}});return l(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Ye[e]?s.resolve(Ye[e]):s.reject(new Error("Driver not found."));return l(n,t,r),n},e.prototype.getSerializer=function(e){var t=s.resolve(be);return l(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function a(){n._config.driver=n.driver()}function i(e){return n._extend(e),a(),n._ready=n._initStorage(n._config),n._ready}function c(e){return function(){var t=0;function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(i).catch(r)}a();var c=new Error("No available storage method found.");return n._driverSet=s.reject(c),n._driverSet}return r()}}var u=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=u.then(function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,a(),n._wrapLibraryMethodsWithReady(),n._initDriver=c(o)})}).catch(function(){a();var e=new Error("No available storage method found.");return n._driverSet=s.reject(e),n._driverSet}),l(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Je[e]},e.prototype._extend=function(e){at(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)ot(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ct=new it;t.exports=ct},{3:3}]},{},[4])(4)),S.exports),E=_(I);const O=globalThis||self;var A="object"==typeof O&&O&&O.Object===Object&&O,N="object"==typeof self&&self&&self.Object===Object&&self,x=A||N||Function("return this")(),R=x.Symbol,D=Object.prototype,T=D.hasOwnProperty,k=D.toString,C=R?R.toStringTag:void 0;var B=Object.prototype.toString;var M=R?R.toStringTag:void 0;function z(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":M&&M in Object(e)?function(e){var t=T.call(e,C),r=e[C];try{e[C]=void 0;var n=!0}catch(a){}var o=k.call(e);return n&&(t?e[C]=r:delete e[C]),o}(e):function(e){return B.call(e)}(e)}function P(e){return null!=e&&"object"==typeof e}var F=Array.isArray;function L(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function U(e){if(!L(e))return!1;var t=z(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var W,q=x["__core-js_shared__"],H=(W=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"";var V=Function.prototype.toString;function G(e){if(null!=e){try{return V.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var K=/^\[object .+?Constructor\]$/,$=Function.prototype,Q=Object.prototype,X=$.toString,Y=Q.hasOwnProperty,J=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Z(e){return!(!L(e)||(t=e,H&&H in t))&&(U(e)?J:K).test(G(e));var t}function ee(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Z(r)?r:void 0}var te=ee(x,"WeakMap"),re=Object.create,ne=function(){function e(){}return function(t){if(!L(t))return{};if(re)return re(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),oe=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var ae=/^(?:0|[1-9]\d*)$/;function ie(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ce(e,t){return e===t||e!=e&&t!=t}var ue=Object.prototype.hasOwnProperty;function se(e,t,r){var n=e[t];ue.call(e,t)&&ce(n,r)&&(void 0!==r||t in e)||function(e,t,r){"__proto__"==t&&oe?oe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}(e,t,r)}function fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var le=Object.prototype;function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||le)}function ve(e){return P(e)&&"[object Arguments]"==z(e)}var he=Object.prototype,pe=he.hasOwnProperty,ye=he.propertyIsEnumerable,be=ve(function(){return arguments}())?ve:function(e){return P(e)&&pe.call(e,"callee")&&!ye.call(e,"callee")};var ge="object"==typeof exports&&exports&&!exports.nodeType&&exports,me=ge&&"object"==typeof module&&module&&!module.nodeType&&module,_e=me&&me.exports===ge?x.Buffer:void 0,je=(_e?_e.isBuffer:void 0)||function(){return!1},we={};function Se(e){return function(t){return e(t)}}we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1;var Ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ee=Ie&&"object"==typeof module&&module&&!module.nodeType&&module,Oe=Ee&&Ee.exports===Ie&&A.process,Ae=function(){try{var e=Ee&&Ee.require&&Ee.require("util").types;return e||Oe&&Oe.binding&&Oe.binding("util")}catch(t){}}(),Ne=Ae&&Ae.isTypedArray,xe=Ne?Se(Ne):function(e){return P(e)&&fe(e.length)&&!!we[z(e)]},Re=Object.prototype.hasOwnProperty;function De(e,t){var r=F(e),n=!r&&be(e),o=!r&&!n&&je(e),a=!r&&!n&&!o&&xe(e),i=r||n||o||a,c=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=c.length;for(var s in e)!Re.call(e,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ie(s,u))||c.push(s);return c}function Te(e,t){return function(r){return e(t(r))}}var ke=Te(Object.keys,Object),Ce=Object.prototype.hasOwnProperty;function Be(e){return null!=(t=e)&&fe(t.length)&&!U(t)?De(e):function(e){if(!de(e))return ke(e);var t=[];for(var r in Object(e))Ce.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e);var t}var Me=ee(Object,"create");var ze=Object.prototype.hasOwnProperty;var Pe=Object.prototype.hasOwnProperty;function Fe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Le(e,t){for(var r=e.length;r--;)if(ce(e[r][0],t))return r;return-1}Fe.prototype.clear=function(){this.__data__=Me?Me(null):{},this.size=0},Fe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fe.prototype.get=function(e){var t=this.__data__;if(Me){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ze.call(t,e)?t[e]:void 0},Fe.prototype.has=function(e){var t=this.__data__;return Me?void 0!==t[e]:Pe.call(t,e)},Fe.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Me&&void 0===t?"__lodash_hash_undefined__":t,this};var Ue=Array.prototype.splice;function We(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}We.prototype.clear=function(){this.__data__=[],this.size=0},We.prototype.delete=function(e){var t=this.__data__,r=Le(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ue.call(t,r,1),--this.size,!0)},We.prototype.get=function(e){var t=this.__data__,r=Le(t,e);return r<0?void 0:t[r][1]},We.prototype.has=function(e){return Le(this.__data__,e)>-1},We.prototype.set=function(e,t){var r=this.__data__,n=Le(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var qe=ee(x,"Map");function He(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ve.prototype.clear=function(){this.size=0,this.__data__={hash:new Fe,map:new(qe||We),string:new Fe}},Ve.prototype.delete=function(e){var t=He(this,e).delete(e);return this.size-=t?1:0,t},Ve.prototype.get=function(e){return He(this,e).get(e)},Ve.prototype.has=function(e){return He(this,e).has(e)},Ve.prototype.set=function(e,t){var r=He(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Ge=Te(Object.getPrototypeOf,Object);function Ke(e){var t=this.__data__=new We(e);this.size=t.size}Ke.prototype.clear=function(){this.__data__=new We,this.size=0},Ke.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ke.prototype.get=function(e){return this.__data__.get(e)},Ke.prototype.has=function(e){return this.__data__.has(e)},Ke.prototype.set=function(e,t){var r=this.__data__;if(r instanceof We){var n=r.__data__;if(!qe||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ve(n)}return r.set(e,t),this.size=r.size,this};var $e="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qe=$e&&"object"==typeof module&&module&&!module.nodeType&&module,Xe=Qe&&Qe.exports===$e?x.Buffer:void 0;Xe&&Xe.allocUnsafe;var Ye=Object.prototype.propertyIsEnumerable,Je=Object.getOwnPropertySymbols,Ze=Je?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}(Je(e),function(t){return Ye.call(e,t)}))}:function(){return[]};function et(e){return function(e,t,r){var n=t(e);return F(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Be,Ze)}var tt=ee(x,"DataView"),rt=ee(x,"Promise"),nt=ee(x,"Set"),ot="[object Map]",at="[object Promise]",it="[object Set]",ct="[object WeakMap]",ut="[object DataView]",st=G(tt),ft=G(qe),lt=G(rt),dt=G(nt),vt=G(te),ht=z;(tt&&ht(new tt(new ArrayBuffer(1)))!=ut||qe&&ht(new qe)!=ot||rt&&ht(rt.resolve())!=at||nt&&ht(new nt)!=it||te&&ht(new te)!=ct)&&(ht=function(e){var t=z(e),r="[object Object]"==t?e.constructor:void 0,n=r?G(r):"";if(n)switch(n){case st:return ut;case ft:return ot;case lt:return at;case dt:return it;case vt:return ct}return t});var pt=Object.prototype.hasOwnProperty;var yt=x.Uint8Array;function bt(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t}var gt=/\w*$/;var mt=R?R.prototype:void 0,_t=mt?mt.valueOf:void 0;function jt(e,t,r){var n,o,a,i,c,u=e.constructor;switch(t){case"[object ArrayBuffer]":return bt(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return c=bt((i=e).buffer),new i.constructor(c,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e){var t=bt(e.buffer);return new e.constructor(t,e.byteOffset,e.length)}(e);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return(a=new(o=e).constructor(o.source,gt.exec(o))).lastIndex=o.lastIndex,a;case"[object Symbol]":return n=e,_t?Object(_t.call(n)):{}}}var wt=Ae&&Ae.isMap,St=wt?Se(wt):function(e){return P(e)&&"[object Map]"==ht(e)};var It=Ae&&Ae.isSet,Et=It?Se(It):function(e){return P(e)&&"[object Set]"==ht(e)},Ot="[object Arguments]",At="[object Function]",Nt="[object Object]",xt={};function Rt(e,t,r,n,o,a){var i;if(void 0!==i)return i;if(!L(e))return e;var c=F(e);if(c)i=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&pt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e);else{var u=ht(e),s=u==At||"[object GeneratorFunction]"==u;if(je(e))return e.slice();if(u==Nt||u==Ot||s&&!o)i=s?{}:function(e){return"function"!=typeof e.constructor||de(e)?{}:ne(Ge(e))}(e);else{if(!xt[u])return o?e:{};i=jt(e,u)}}a||(a=new Ke);var f=a.get(e);if(f)return f;a.set(e,i),Et(e)?e.forEach(function(n){i.add(Rt(n,t,r,n,e,a))}):St(e)&&e.forEach(function(n,o){i.set(o,Rt(n,t,r,o,e,a))});var l=c?void 0:et(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(l||e,function(n,o){l&&(n=e[o=n]),se(i,o,Rt(n,t,r,o,e,a))}),i}xt[Ot]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object DataView]"]=xt["[object Boolean]"]=xt["[object Date]"]=xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Map]"]=xt["[object Number]"]=xt[Nt]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object Symbol]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Error]"]=xt[At]=xt["[object WeakMap]"]=!1;let Dt="tv_charts_storage";c({async setStorageKey(e="tv_charts_storage"){Dt=e},getFullStorage:async()=>await E.getItem(Dt)||{},async removeChart(e){const t=await this.getFullStorage();return!!t[e]&&(delete t[e],await E.setItem(Dt,t),!0)},clearAll:async()=>E.removeItem(Dt),async saveChart(e,t){let r=!1;const n=Rt(t,5);let o=[];n.charts.forEach(e=>{e.panes.forEach(e=>{e.sources.forEach(e=>{var t,n,a;(null==(t=e.type)?void 0:t.includes("LineTool"))&&(r=!0);/study/i.test(e.type||"")&&(null==(n=e.metaInfo)?void 0:n.name)&&o.push((null==(a=e.metaInfo)?void 0:a.name)||"")})})}),t.charts.forEach(e=>{e.panes=e.panes.filter(e=>(e.sources=e.sources.filter(e=>{const t=e.type||"";return!/study/i.test(t)||/volume/i.test(t)}),e.sources.length>0))});const a=await this.getFullStorage();if(!r)return a[e]?(delete a[e],a.allStudies=Array.from(new Set(["Volume",...o])),await E.setItem(Dt,a),{status:"cleaned"}):(a.allStudies=Array.from(new Set(["Volume",...o])),await E.setItem(Dt,a),{status:"ignored"});a[e]={...t,_lastModified:Date.now()},a.allStudies=Array.from(new Set(["Volume",...o]));const i=Object.keys(a).filter(e=>"allStudies"!==e);if(i.length>100){const e=i.reduce((e,t)=>(a[e]._lastModified||0)<(a[t]._lastModified||0)?e:t);delete a[e]}return await E.setItem(Dt,a),{status:"saved"}}})}();

import{e5 as l,ak as n,ay as e,bI as u,gG as s,gH as a,g8 as o}from"./pxHhHUe5.js";let t=null;const v=l("v2ws",()=>{const l=e(null),v=e(!1),T=n({[u.PORTRAIT_STATISTICS]:null,[u.PUBLIC_TWITTER]:null,[u.PUBLIC_TWITTER]:null,[u.PUMPSTATE]:null,[u.TOKEN_UPDATED]:null}),r=n=>{if(l.value)return;if(t)return void(l.value=t);const e=`${(s()||location.origin).replace("http","ws")}/v2ws`,r=new a({url:e,...n||{}});l.value||t?r.close():(t=r,l.value=r,l.value.onopen(()=>{v.value=!0}).onclose(()=>{v.value=!1}).onmessage(l=>{const n=o(l);if(!n)return;const{event:e,data:s}=n;e===u.PORTRAIT_STATISTICS?T[e]=null==s?void 0:s.updates:e===u.PUBLIC_TWITTER?T[e]=null==s?void 0:s.post:e===u.PUMPSTATE?T[e]=null==s?void 0:s.msgs:e===u.TOKEN_UPDATED?T[e]=null==s?void 0:s.msg:T[e]=s},"main"))};return{getWSInstance:function(){if(!l.value){const l=`${(s()||location.origin).replace("http","ws")}/v2ws`;r({url:l})}return l.value},isConnected:v,init:r,send:(n,e)=>{var u;if(!l.value){const l=`${(s()||location.origin).replace("http","ws")}/v2ws`;r(e||{url:l})}return null==(u=l.value)||u.send(n),l.value},close:()=>{var n;v.value=!1,null==(n=l.value)||n.close(),l.value=null,t=null},wsResult:T}});export{v as u};

import{n as l,au as e,at as a,cF as t,av as s,D as n,E as o,aW as i,c as d,o as c,a as u,t as x,J as r,bX as A,F as p,d as v,K as m,ay as h,b,w as f,aP as g,aY as S,a5 as k,a6 as K,H as C,aX as I,al as y,T,bC as q,o9 as W,oa as O,aR as F,cB as E,d0 as V,dT as J,ek as R,ob as X,oc as z,_ as H}from"./pxHhHUe5.js";import{V as j}from"./8RBFgnO2.js";const w={class:"bg-[--secondary-bg] w-full flex justify-center h-[calc(100vh-92px)] overflow-y-auto"},N={class:"py-40px"},Y={class:"text-24px color-[--main-text] font-500"},B={class:"mt-6px color-[--secondary-text] text-12px"},G={class:"flex justify-center mt-20px pb-20px"},L={class:"w-678px max-w-50vw mr-42px"},M={class:"flex items-center gap-8px"},U={class:"text-14px b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px flex-1"},P={class:"text-14px b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px flex-1"},Q={class:"mt-20px mb-10px color-[--secondary-text] text-14px"},D={class:"text-14px b b-solid b-[--main-divider] p-12px rd-8px min-h-400px h-[calc(100vh-492px)] max-h-600px overflow-y-auto relative"},Z={class:"color-#9CA3AF flex items-center absolute top-12px left-12px"},$={class:"color-[--main-text]"},_={class:"text-12px ml-2px"},ll={class:"text-14px color-[--secondary-text] mt-20px mb-10px mt-20px"},el={class:"b b-solid b-[--main-divider] h-44px px-12px flex items-center rd-8px"},al={class:"flex items-center mt-20px"},tl={class:"w-500px pl-42px b-l b-l-solid b-l-[--main-divider] lh-20px"},sl={class:"text-20px font-500 mb-10px"},nl={class:"text-14px font-500 mb-8px"},ol={class:"text-14px font-400 color-[--third-text] mb-20px"},il={class:"text-14px font-500 mb-8px"},dl={class:"text-14px font-400 color-[--third-text] mb-20px"},cl={class:"text-14px font-500 mb-8px"},ul={class:"text-14px font-400 color-[--third-text]"},xl={href:"https://solana.com/zh/docs/core/accounts",target:"_blank",class:"underline clickable"},rl=H(l({__name:"index",setup(l){const H=e(),rl=a(),Al=t(),pl=o(()=>{var l,e,a,t;return(null==(t=null==(a=null==(e=null==(l=null==rl?void 0:rl.userInfo)?void 0:l.addresses)?void 0:e.find)?void 0:a.call(e,l=>"solana"===(null==l?void 0:l.chain)))?void 0:t.address)||H.address||""}),vl=p([]),ml=p("0"),hl=p("0"),bl=p(!1),fl=p(!1),{t:gl}=s(),Sl=o(()=>new q(hl.value).times(Kl.value.length||0).toFixed()),kl=p(!1),Kl=h([]),Cl=p(!0),Il=l=>{var e,a;Kl.value=l?null==(a=null==(e=null==vl?void 0:vl.value)?void 0:e.slice(0,20))?void 0:a.map(l=>l.tokenAccount):[];const t=Kl.value.length;Cl.value=t>0&&t<vl.value.length},yl=l=>{const e=l.length;kl.value=e===vl.value.length||Kl.value.length>=20,Cl.value=e>0&&e<vl.value.length};function Tl(){const l=Kl.value.map(l=>{var e;return{mint:(null==(e=vl.value.find(e=>e.tokenAccount===l))?void 0:e.mint)||"",tokenAccount:l}});bl.value=!0;let e=null;O({closeAccounts:l}).then(l=>(fl.value=!0,e=F({message:gl("loadingCloseAccount"),plain:!0,icon:E(j,{color:"var(--d-F5F5F5-l-666)",strokeWidth:5}),customClass:"loading-close-account"}),l.wait())).then(()=>{var l;bl.value=!1,fl.value=!1,F({message:gl("closeAccountsSuccess"),type:"success",plain:!0}),e&&(null==(l=null==e?void 0:e.close)||l.call(e)),ql(),V().updateHolderNum++,Kl.value=[]}).catch(l=>{var a,t,s,n,o,i;if(bl.value=!1,fl.value=!1,e&&(null==(a=null==e?void 0:e.close)||a.call(e)),rl.accessToken&&(null==(o=null==(n=null==(s=null==(t=null==rl?void 0:rl.userInfo)?void 0:t.addresses)?void 0:s.find)?void 0:n.call(s,l=>"solana"===(null==l?void 0:l.chain)))?void 0:o.address)){const e="string"==typeof l?l:(null==(i=null==l?void 0:l.data)?void 0:i.message)||(null==l?void 0:l.message)||(null==l?void 0:l.msg);F({message:J(e),type:"error",plain:!0})}else R(l,"solana")})}function ql(){var l;(null==H?void 0:H.address)&&"solana"!==(null==H?void 0:H.chain)?vl.value=[]:X(pl.value).then(l=>{vl.value=l}),null==(l=z)||l(pl.value).then(l=>{ml.value=(null==l?void 0:l.balance)||"0"})}return n(pl,l=>{l&&ql()},{immediate:!0}),i(()=>{W().then(l=>{hl.value=new q(l).shiftedBy(-9).toFixed()})}),(l,e)=>{var a,t,s,n;const o=S,i=I,p=T;return c(),d("div",w,[u("div",N,[u("h3",Y,"Solana "+x(l.$t("rentRecovery")),1),u("div",B,x(l.$t("rentRecoveryDesc")),1),u("div",G,[u("div",L,[u("div",M,[u("div",U,[u("span",null,"SOL "+x(l.$t("balance1"))+": "+x(("formatNumber2"in l?l.formatNumber2:r(A))(r(ml),3))+" SOL",1)]),u("div",P,[u("span",null,x(l.$t("recyclableTokens"))+": "+x((null==(a=r(vl))?void 0:a.length)||0),1)])]),u("div",Q,x(l.$t("selectClosedTokenAccount")),1),u("div",D,[u("div",Z,[u("span",$,x(l.$t("selectedToken")),1),u("span",{class:m((null==(t=r(Kl))?void 0:t.length)>0?"color-#3F80F7":"")},x((null==(s=r(Kl))?void 0:s.length)||0),3),e[3]||(e[3]=v("/",-1)),u("span",null,x((null==(n=r(vl))?void 0:n.length)||0),1),u("span",_,"("+x(r(gl)("limitRent"))+")",1)]),e[4]||(e[4]=u("div",{class:"h-16px mb-15px"},null,-1)),u("div",null,[b(o,{modelValue:r(kl),"onUpdate:modelValue":e[0]||(e[0]=l=>g(kl)?kl.value=l:null),indeterminate:r(Cl),onChange:Il},{default:f(()=>[v(x(l.$t("selectAll")),1)]),_:1},8,["modelValue","indeterminate"]),b(i,{modelValue:r(Kl),"onUpdate:modelValue":e[1]||(e[1]=l=>g(Kl)?Kl.value=l:null),onChange:yl},{default:f(()=>[(c(!0),d(k,null,K(r(vl),l=>(c(),C(o,{key:l.tokenAccount,value:l.tokenAccount,shape:"square",class:"mt-10px flex!",disabled:r(Kl).length>=20&&!r(Kl).includes(l.tokenAccount)},{default:f(()=>[v(x(l.symbol||"UNKNOWN"),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])])]),u("div",ll,x(l.$t("availableRent")),1),u("div",el,[e[5]||(e[5]=u("img",{class:"w-24px mr-8px",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAGY0lEQVRYCc1YW2xUVRRd9zFtxxSryKu0ASlWI8SgASRikYB+GH/8MPiIoCJqgokxUeIHfAgGNCQagpEPNf74CDGaKDH8YIgkAvENVVFEbIJCKaVIGTqd6cx9uNaZuTAMM9OptJTdrJ5zz9n3nHX3uXudM9fC/zObt7UR84lZRCtxPTGW8Iku4jjRTXxF7Ca+JwJiRK2Fo79KHCbCIeIQ/dcS04hht+s4ooiliKESK/ZPcIxNRBMxLLaMoxwjiie61Ot/OOaDl8Kwjje/PgLEih9sM+fQXEOyenp/TBQPNlLXX3Kuq6tlGKfjF5eRXPTQn3HO2mpIbhkFchFJJU9Fe5S9kfNolSvKMZQ+SWBHi1g0r8R9YkTSjSosVxV2FLRfUI2Pm4iahgY+BceL8fYwQGhbCHwPsCzWQ1jxWvipNKz6OIL+foRst8bEWequHA9zz4G/EZzuu2B8XownnidWq8PSP9qNxD7iKl2Us+Z5izD72TUI62Pw3AC+E8ITVLd9eDHuc4Rn6mGuzr6slTV136VvjO0ss8kk+h5YD/+nv0pN189GbZ+dTr73RZaL8/WSxbTZd+POp15GrCYOO7DgwIYdMjICr1U/Bz63Iw/uyqZN/fyTH7kCfQM4u3IzvL2/lZyLjXxMJIldiqCW+QChKJa0llsWYfGTGxDWuYwWI+T4jAgjoUjVWIykj6wTnI+qIml8FE1Gl76KnGd5yKST6Fq3Bcnte0rOVdB4hPVWkZtLlCd30wLct+Q1WB7fq4EQbsAl47L6PonFbDi89l1GiARNH0nbfoighg/DPtuhH69tz2cEQxxdvRnJXd8W8ChbncqehSK4oKwLO5KJHuz8dJ1JBMux4fEPtm2SwQ99lnyRXbYrSViSGkISVmIEqrOfq8+aj8zJUzi7/+dK0xX3zVHD50SU4lda+ZEiOFksy1lD/SRMaZwFL/SMTPhhNh8ZhkbyomfjMjIH4AceAostjJ5TF4eX6YddV8P2XCRTXceROFIya8tNP10EK57LWpvvwEP3bETA903JkbVJlIkhSckqSSK5USkZMcgljMf3Um25hAmR8dLYt2k9ur75uhyh4vYbJDMbCBEtaZ09BzGQSmBm00JKhk1H3sKDO5MTDl8uh21ql5yoHkmOk5cWJYxtObAoOY4dw/g589B7+CD6T+gXwaBWK4JrCS5QeTvS3Y4gk8GMSW2GjCFFAjmiOS0UQYgMS0NKSsi6lSevhxB5x4mhcW4bTv3ejtQp7WoVLS2C2lYq7iAaouPED/Azacyc0JaPGp/KTGokOBchXhvykmVDWE8eCfj5qLtuLZpuX4DOfXswkOjV8OXsOB/bbHG3lvMobm++9maMHdNkZEfSYbsx/ldiSGC07pQYiQ33ZEmCSR4mmOXyLWJSyVdtWoCeQ+1IJ04XT1F4vVcXW4krTV4iPtuUHO3Ew0RVNrfxXrhuHQ8uEmPeIqnRKcWA2c1MV4S42iZKlmUzmoytEXVFNydDIU9Bxzp+RF+i4nu4WwS/q4oZnR5rWY0lrS+Y/ThLWfEc6h5HUD2IJIbSoxNNVn0xi1JEv1hegrRf5/sTfV345J2nB5t6r2IgkvohPrWS97LJq/B4yxqz74qMDgcZl5rIu3XkUl1kzVGKURQ5c6iIiNM/aw4QIRLpHnz4/nL0dFcUbXGaoSzmW4txxF1ESXtiwiqsbFx7TmKskK+Iz4MA19gJqXE8BKhUBnMtKTC5zOWq8zDBNt83+in/VLIXH2xdge7uP0vOVdD4Lus7FEHZdOJX4qLfp/ePWYpXJr+XX0rtJHyHuIQ+l3WAu4o5SjFK5GeWWhHMmOUFMlzOIO/rsb83exJvb1+Oo92aqqLpwHobcSgiKO+NxEuqFFqzez0mxppNUvjcZ7UrDIQpHlxqeIyxoTYlSC5puK3x2qesOA73YJa245hk8riHnzjTgb70v4XDl6u/xY7nijv1Q0UpFaX4aJXHyGFKMbno+pkrgODSiEy58o1RJKmlHdSUKKPx6WM759Vnl6qsgV47iMv1Hm7jXNdUxazASR9ythAjTVKf+C6StwIeg1YfoYcya7iJSjGWDzp7lQ5K+zeJJHGpRPUZWZo7iRh2a+WIWpIOYqhEO3nPBqKFqNoKd5Kqb6IjtxHzg7+N5XxiAjGNGEdofz9DaLP/g/iF2E/sJPThY0j2H1aHjc7nCImxAAAAAElFTkSuQmCC",alt:"",srcset:""},null,-1)),u("span",null,x(("formatNumber2"in l?l.formatNumber2:r(A))(r(Sl),3))+" SOL",1)]),u("div",al,[(c(),C(p,{key:r(Al).theme,color:"var('--border')",class:"flex-1 mr-15px! max-h-40px rd-8px!",size:"large",onClick:e[2]||(e[2]=y(l=>Kl.value=[],["stop"]))},{default:f(()=>[v(x(l.$t("reset")),1)]),_:1})),b(p,{type:"primary",class:"flex-1 max-h-40px rd-8px!",size:"large",loading:r(bl),disabled:!r(Kl).length||!r(pl),onClick:y(Tl,["stop"])},{default:f(()=>[v(x(l.$t("submit")),1)]),_:1},8,["loading","disabled"])])]),u("div",tl,[u("h2",sl,x(l.$t("question")),1),u("h3",nl,x(l.$t("question1Title")),1),u("div",ol,x(l.$t("question1Content")),1),u("h3",il,x(l.$t("question2Title")),1),u("div",dl,x(l.$t("question2Content")),1),u("h3",cl,x(l.$t("question3Title")),1),u("div",ul,[v(x(l.$t("question3Content"))+" ",1),u("a",xl,x(l.$t("question3Content2")),1)])])])])])}}}),[["__scopeId","data-v-9c3fde25"]]);export{rl as default};

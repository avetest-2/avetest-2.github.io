import{n as e,av as l,a3 as t,a2 as a,D as s,ay as r,H as o,o as i,aQ as n,F as d,w as u,b as c,bp as m,al as v,J as f,c as p,S as _,bq as h,a5 as b,a6 as x,E as g,a as y,t as k,aY as w,L as $,T as A,d as N,qa as C,aR as D,_ as L,by as T,az as F,d9 as S,cF as V,aA as B,bF as E,a7 as U,M as z,aP as M,bS as O,aa as R,K as P,bT as I,a8 as H,aT as Y,W as j,ac as q,cE as K,P as W,ad as Z,aq as J,bZ as Q,b_ as G,bP as X,ae as ee,fD as le,at as te,au as ae,gC as se,c6 as re,bC as oe,bV as ie,bW as ne,qb as de,fv as ue,a9 as ce,qc as me,cD as ve}from"./pxHhHUe5.js";import{_ as fe}from"./D6xloY0K.js";import{a as pe,E as _e}from"./DlhmlHT6.js";import"./xG3n2otq.js";import{E as he}from"./uG3PizZo.js";import{E as be,a as xe}from"./BC28JpVo.js";import{E as ge}from"./CAY6cvuw.js";import{E as ye}from"./-qzEQscJ.js";const ke={class:"el-form-item__error"},we={key:0,class:"font-normal text-sm leading-[16px] flex gap-8px flex-col p-14px bg-[--border] mb-8px"},$e={class:"text-[--third-text]"},Ae={key:0},Ne={key:0,class:"text-[--third-text] font-medium text-xs leading-[100%] mt-5px"},Ce={class:"flex-between w-100%"},De=L(e({__name:"batchRemark",props:{width:{default:"320"},modelValue:{default:()=>({list:[],symbol:""})},buttonRef:{},title:{default:""}},emits:["update:visible","beforeEnter","onConfirm","onCancel"],setup(e,{expose:L,emit:T}){const{t:F}=l(),{lang:S}=t(a()),V=e,B=T,{isDark:E,batchRemarkFormData:U}=t(a()),z=d(),M=r([]),O={},R=d(),P=g(()=>S.value.indexOf("zh")>-1?[{value:1,label:"TOP"},{value:2,label:F("rank")},{value:3,label:F("profit5")}]:[{value:1,label:"TOP"},{value:3,label:F("profit5")}]),I=g(()=>{var e;return null==(e=P.value.find(e=>e.value==U.value.type))?void 0:e.label});function H(){var e,l,t,a;(null==(l=null==(e=V.modelValue)?void 0:e.list)?void 0:l.length)?M.value=null==(a=null==(t=V.modelValue)?void 0:t.list)?void 0:a.map((e,l)=>`${V.modelValue.symbol}_${I.value}${l+1}${U.value.needAmount?"_"+e.total_profit:""}`).slice(0,3):M.value=[]}s(U.value,e=>{H()});const Y=()=>{S.value.indexOf("zh")<=-1&&U.value.type<=2&&(U.value.type=1),B("beforeEnter"),H()},j=e=>{};function q(){var e;null==(e=R.value)||e.resetFields(),K()}function K(){var e,l;null==(l=null==(e=f(z))?void 0:e.hide)||l.call(e)}return L({close:K}),(l,t)=>{const a=xe,s=be,r=h,d=w,g=A,L=m,T=n;return i(),o(T,{ref_key:"popoverRef",ref:z,width:null==V?void 0:V.width,trigger:"click","virtual-ref":V.buttonRef,"virtual-triggering":"",title:null==V?void 0:V.title,persistent:!1,teleported:!1,"popper-class":"w-batchRemarkPop","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--main-text)",onBeforeEnter:Y},{default:u(()=>[c(L,{ref_key:"formRef",ref:R,model:f(U),rules:O,onSubmit:t[3]||(t[3]=v(e=>{var l;(l=f(R))&&l.validate((e,l)=>{if(e){const e=V.modelValue.list.map((e,l)=>({address:e.address,user_chain:e.user_chain,user_address:e.user_address,remark:`${V.modelValue.symbol}_${I.value}${l+1}${U.value.needAmount?"_"+e.total_profit:""}`}));C({update:!U.value.isUpdateExist,remarks:e}).then(e=>{B("onConfirm"),D({message:F("success"),type:"success"})}).catch(e=>{D.error(F("fail"))}),K()}})},["prevent","stop"]))},{default:u(()=>{var n,m;return[c(r,{prop:"type",required:!0,"label-position":"top",class:"mb-12px!",size:"large"},{error:u(()=>[y("div",ke,k(f(F)("cannotBeEmpty")),1)]),default:u(()=>[c(s,{"popper-class":"w-selectAutoSell",modelValue:f(U).type,"onUpdate:modelValue":t[0]||(t[0]=e=>f(U).type=e),placeholder:f(F)("pleaseSelect"),style:{},onChange:j,persistent:!0,teleported:!1,size:"large"},{default:u(()=>[(i(!0),p(b,null,x(f(P),e=>(i(),o(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),f(M).length?(i(),p("div",we,[y("div",$e,k(f(F)("preview")),1),(i(!0),p(b,null,x(f(M),e=>(i(),p("div",{class:"text-[--main-text]",key:e},k(e),1))),128)),Array.isArray(null==(n=e.modelValue)?void 0:n.list)&&(null==(m=e.modelValue)?void 0:m.list.length)>3?(i(),p("div",Ae,"...")):_("",!0)])):_("",!0),c(r,{prop:"needAmount",class:"mb-12px!",size:"small"},{default:u(()=>[c(d,{modelValue:f(U).needAmount,"onUpdate:modelValue":t[1]||(t[1]=e=>f(U).needAmount=e),label:f(F)("profitAmount"),style:$(f(U).needAmount?"":"--el-checkbox-checked-text-color:var(--third-text)")},null,8,["modelValue","label","style"])]),_:1}),c(r,{prop:"isUpdateExist",class:"mb-12px!",size:"small"},{default:u(()=>[c(d,{modelValue:f(U).isUpdateExist,"onUpdate:modelValue":t[2]||(t[2]=e=>f(U).isUpdateExist=e),label:f(F)("notUpdateExistRemark"),style:$(f(U).isUpdateExist?"":"--el-checkbox-checked-text-color:var(--third-text)")},null,8,["modelValue","label","style"]),f(U).isUpdateExist?_("",!0):(i(),p("div",Ne,k(f(F)("notUpdateExistRemarkTip")),1))]),_:1}),c(r,{class:"mb-0px!"},{default:u(()=>[y("div",Ce,[c(g,{class:"flex-1",color:f(E)?"#1F242C":"#D9E8FF",onClick:v(q,["stop","prevent"])},{default:u(()=>[N(k(l.$t("cancel")),1)]),_:1},8,["color"]),c(g,{type:"primary",class:"flex-1","native-type":"submit",color:"#3F80F7"},{default:u(()=>[N(k(l.$t("confirm")),1)]),_:1})])]),_:1})]}),_:1},8,["model"])]),_:1},8,["width","virtual-ref","title"])}}}),[["__scopeId","data-v-a982a95a"]]),Le={class:"holder-list"},Te={key:0,class:"flex flex-col items-center justify-center py-30px"},Fe={key:0,src:Q},Se={key:1,src:G},Ve={key:1},Be={class:"flex items-center"},Ee={class:"flex mt-10px"},Ue={class:"mt-20px"},ze={class:"flex items-baseline"},Me={class:"flex-start"},Oe={class:"color-[--third-text] mr-10px"},Re={class:"relative"},Pe={class:"flex-start"},Ie={style:{position:"relative",padding:"0 4px 0","line-height":"1"}},He={class:"text-[--third-text]"},Ye={class:"line-bar"},je={style:{display:"inline-flex","align-items":"center"}},qe={key:0,class:"text-12px",style:{color:"#f6465d"}},Ke={key:0,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},We={key:1,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},Ze={class:"text-12px",style:{"line-height":"1.3"}},Je={class:"text-12px",style:{"line-height":"1.3"}},Qe=["onClick"],Ge={key:1},Xe=["onClick"],el={key:1},ll={class:"text-[--third-text]"},tl=L(e({__name:"list",props:{modelValue:Boolean,tableList:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},tabActive:{type:[String,Number],default:"all"},searchOriginKeyword:{type:String,default:""},searchOriginType:{type:String,default:""},isAttention:{type:Boolean,default:!1}},emits:["filterAddress","handleSortChange","filterOriginAddress","reLoad"],setup(e,{expose:s,emit:m}){var h;const x=T(),w=e,C=m;s({sort:function(e,l){var t;null==(t=null==ke?void 0:ke.value)||t.sort(e,l)},clearSort:function(){var e;null==(e=null==ke?void 0:ke.value)||e.clearSort()}});const{tableList:L,loading:Q}=F(w),{mode:G}=t(a()),{token:ie,price:ne,pair:de}=t(T()),ue=S(),ce=d({buttonRefs:{}}),{t:me}=l(),ve=a(),he=V(),be=B(),xe=r(!1),ge=r(""),ye=r(""),ke=E("holderListRef"),we=d(),$e=d(),Ae=d({list:[],symbol:null==(h=ie.value)?void 0:h.symbol}),Ne=()=>{var e;const l=[...L.value];Ae.value.symbol=(null==(e=ie.value)?void 0:e.symbol)||"",Ae.value.list=l.slice(0,20).map(e=>({total_profit:Math.trunc(null==e?void 0:e.total_profit)||0,user_address:null==e?void 0:e.holder,user_chain:null==e?void 0:e.chain,address:X().currentAddress}))||[]},Ce=async()=>{var e,l;C("reLoad"),null==(l=null==(e=$e.value)?void 0:e.close)||l.call(e)},tl=g(()=>{var e,l;const t=be.params.id;return t?ee(t):{address:(null==(e=ie.value)?void 0:e.token)||"",chain:(null==(l=ie.value)?void 0:l.chain)||""}}),al=g(()=>Math.max(x.commonHeight-265,450));function sl(e){if(!ie.value)return;if(!le.includes(ie.value.chain))return;const{symbol:l,logo_url:t,chain:a,token:s}=ie.value,{target_token:r,token0_address:o,token0_symbol:i,token1_symbol:n,pair:d}=de.value;ue.$patch({drawerVisible:!0,tokenInfo:{id:be.params.id,symbol:l,logo_url:t,chain:a,address:s,remark:e.remark},pairInfo:{target_token:r,token0_address:o,token0_symbol:i,token1_symbol:n,pairAddress:d},user_address:e.holder})}function rl(e,l=0){const t=Math.max(((null==e?void 0:e.bought)||0)-((null==e?void 0:e.sold)||0),0);return new oe(l-((null==e?void 0:e.avg_purchase_price)||0)).times(t).toNumber()}function ol(e,l=0){return rl(e,l)+((null==e?void 0:e.realized_profit)||0)}function il(e){xe.value=!1,C("filterAddress",e),ye.value=e||"",ge.value=e||""}function nl(e){C("handleSortChange",e)}function dl(e,l){C("filterOriginAddress",{address:e,type:l})}return(l,t)=>{const a=R,s=Y,r=A,d=n,m=j,h=I,x=fe,g=_e,C=pe,T=U("tooltip"),F=O;return i(),p("div",Le,[c(De,{ref_key:"proPopoverRef",ref:$e,modelValue:f(Ae),"onUpdate:modelValue":t[0]||(t[0]=e=>M(Ae)?Ae.value=e:null),"button-ref":f(we)||{},width:"248",title:l.$t("top20Remarked"),onOnConfirm:Ce,onBeforeEnter:Ne},null,8,["modelValue","button-ref","title"]),z((i(),o(C,{ref_key:"holderListRef",ref:ke,data:f(L),fit:"","scrollbar-always-on":"",height:f(al),style:{width:"100%"},onSortChange:nl,onRowClick:sl},{empty:u(()=>[f(Q)?(i(),p("span",Ve)):(i(),p("div",Te,["light"===f(G)?(i(),p("img",Fe)):_("",!0),"dark"===f(G)?(i(),p("img",Se)):_("",!0),y("span",null,k(f(me)("emptyNoData")),1)]))]),default:u(()=>{var n,A,C,F,S,V;return[c(g,{label:"#"+l.$t("holder"),align:"left","min-width":260,fixed:"left"},{header:u(()=>[y("div",Be,[y("span",null,k(l.$t("wallet2")),1),f(ge)?(i(),o(a,{key:0,name:"custom:filter",class:"color-[--primary-color] cursor-pointer text-10px",onClick:t[1]||(t[1]=v(e=>il(""),["stop","prevent"]))})):(i(),o(d,{key:1,visible:f(xe),"onUpdate:visible":t[4]||(t[4]=e=>M(xe)?xe.value=e:null),placement:"bottom-start",title:"",width:350,trigger:"click"},{reference:u(()=>[y("div",null,[c(a,{name:"custom:filter",class:"color-[--d-666-l-999] cursor-pointer text-10px"})])]),default:u(()=>[y("div",null,[y("div",Ee,[c(s,{modelValue:f(ye),"onUpdate:modelValue":t[2]||(t[2]=e=>M(ye)?ye.value=e:null),modelModifiers:{trim:!0},placeholder:l.$t("searchWallet"),clearable:""},null,8,["modelValue","placeholder"])]),y("div",Ue,[c(r,{class:"w-full",size:"default",color:f(he).isDark?"#f5f5f5":"#222222",style:{height:"30px","min-width":"70px","--el-button-font-weight":"400"},onClick:t[3]||(t[3]=v(e=>il(f(ye)),["stop"]))},{default:u(()=>[N(k(l.$t("confirm")),1)]),_:1},8,["color"])])])]),_:1},8,["visible"])),e.isAttention&&!f(L).length?(i(),o(m,{key:2,content:l.$t("noFollowedWalletPurchases"),effect:"light",persistent:!1},{default:u(()=>[c(a,{name:"mdi:information",class:"color-[--d-666-l-999] cursor-pointer text-14px ml-4px"})]),_:1},8,["content"])):_("",!0),["buy24h","all","30",30].indexOf(e.tabActive)>-1?(i(),o(a,{key:3,name:"fe:edit",class:"text-14px clickable",ref_key:"addButtonRef",ref:we},null,512)):_("",!0)])]),default:u(({row:e,$index:s})=>[y("div",ze,[y("div",Me,[y("span",Oe,k(s+1<10?"0":"")+k(s+1),1),c(a,{ref:e=>f(ce).buttonRefs[s]=e,name:"custom:attention",class:P([1===e.is_wallet_address_fav?"color-#F45469":"color-[--icon-color]","h-16px w-16px clickable shrink-0 mt-4px"]),onClick:v(l=>(async(e,l)=>{X().currentAddress||te().changeConnectVisible(!0),ae().address&&!ae().walletSignature[ae().address]&&await ae().signMessageForFavorite(),1===e.is_wallet_address_fav||w.isAttention?re({address:X().currentAddress,user_address:e.holder,user_chain:e.chain}).then(()=>{ve.getFollowsNum(),D.success(me("attention1Canceled")),L.value[l].is_wallet_address_fav=0}).catch(e=>{}).finally(()=>{}):X().confirmAttention(ce.value.buttonRefs[l],e.chain,t=>se({address:X().currentAddress,user_address:e.holder,user_chain:e.chain,group:t.group,is_monitored:t.is_monitored}).then(e=>(ve.getFollowsNum(),L.value[l].is_wallet_address_fav=1,Promise.resolve(e))).catch(e=>Promise.reject(e)).finally(()=>{}))})(e,s),["stop","prevent"])},null,8,["class","onClick"])]),y("div",Re,[y("div",Pe,[y("div",Ie,[(i(),o(h,{key:e.holder,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block",remark:e.remark,address:e.holder,chain:e.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",wallet_logo:e.wallet_logo,showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},{default:u(()=>[y("div",He,[t[7]||(t[7]=N(" ( ",-1)),y("span",{style:$({color:(null==e?void 0:e.total_bought)?"#12B886":"var(--third-text)"}),class:"text-[--third-text]"},k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.total_bought)||0,2)),5),t[8]||(t[8]=N(" / ",-1)),y("span",{style:$({color:(null==e?void 0:e.total_sold)?"#F6465D":"var(--third-text)"})},k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.total_sold)||0,2)),5),t[9]||(t[9]=N(" ) ",-1))])]),_:2},1032,["remark","address","chain","wallet_logo","formatAddress"]))]),c(x,{tags:e.new_tags,walletAddress:e.holder,chain:e.chain},null,8,["tags","walletAddress","chain"])]),y("div",Ye,[Number(null==e?void 0:e.max_balance)>0?(i(),p("span",{key:0,style:$({width:100*((null==e?void 0:e.balance)||0)/((null==e?void 0:e.max_balance)||0)+"%"})},null,4)):_("",!0)])])])]),_:1},8,["label"]),c(g,{label:`${null==(A=f(q)(null==(n=f(tl))?void 0:n.chain))?void 0:A.main_name} ${l.$t("bal")}`,align:"right","min-width":"90"},{default:u(({row:e})=>[y("span",{style:$({color:(null==e?void 0:e.main_coin_balance)?"":"var(--third-text)"})},k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.main_coin_balance)||0,2)),5)]),_:1},8,["label"]),c(g,{label:l.$t("ratio")+f(ve).isUSDT?l.$t("bal"):l.$t("amount"),align:"right",width:f(K)((f(ve).isUSDT?l.$t("bal"):l.$t("amount"))+"/"+l.$t("ratio"))+100,sortable:"custom","sort-orders":["descending","ascending",null],prop:"balance"},{header:u(()=>[y("div",je,[y("span",null,k(l.$t("ratio"))+"/"+k(f(ve).isUSDT?l.$t("bal"):l.$t("amount")),1),z(c(a,{name:"custom:dollar",class:"color-[--third-text] clickable text-12px ml-3px",onClick:t[5]||(t[5]=v(e=>f(ve).isUSDT=!1,["stop"]))},null,512),[[W,f(ve).isUSDT]]),z(c(a,{name:"custom:amount",class:"color-[--third-text] clickable text-12px ml-3px",onClick:t[6]||(t[6]=v(e=>f(ve).isUSDT=!0,["stop"]))},null,512),[[W,!f(ve).isUSDT]])])]),default:u(({row:e})=>[-1===e.balance?(i(),p("span",qe,k(l.$t("soldAll")),1)):(i(),p(b,{key:1},[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.balance_ratio)?"":"var(--third-text)"}])},k(("formatNumber"in l?l.formatNumber:f(H))(100*((null==e?void 0:e.balance_ratio)||0),1))+"% ",5),f(ve).isUSDT?(i(),p("div",Ke,k("$"+("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.balance_usd)||0,1)),1)):(i(),p("div",We,k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.balance)||0,1)),1))],64))]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("totalPnL"),align:"right",width:f(K)(l.$t("totalPnL"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"total_profit"},{default:u(({row:e})=>[y("div",{style:$([{color:ol(e,f(ne))?ol(e,f(ne))>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},k(ol(e,f(ne))>0?"+":ol(e,f(ne))?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:f(H))((ol(e,f(ne))||0)*(ol(e,f(ne))>0?1:-1),1)),5),y("div",{class:"text-12px",style:$([{color:(null==e?void 0:e.total_profit_ratio)?(null==e?void 0:e.total_profit_ratio)>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},k((null==e?void 0:e.total_profit_ratio)>0?"+":"")+k(("formatNumber"in l?l.formatNumber:f(H))(100*((null==e?void 0:e.total_profit_ratio)||0),1))+"% ",5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("realized"),align:"right","min-width":"120",width:f(K)(l.$t("realized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"realized_profit"},{default:u(({row:e})=>[y("span",{style:$({color:(null==e?void 0:e.realized_profit)?(null==e?void 0:e.realized_profit)>0?"#12B886":"#F6465D":"var(--third-text)"})},k((null==e?void 0:e.realized_profit)>0?"+":(null==e?void 0:e.realized_profit)?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:f(H))(((null==e?void 0:e.realized_profit)||0)*((null==e?void 0:e.realized_profit)>0?1:-1),1)),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("unrealized"),align:"right",width:f(K)(l.$t("unrealized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"unrealized_profit"},{default:u(({row:e})=>[y("span",{style:$({color:rl(e,f(ne))?rl(e,f(ne))>0?"#12B886":"#F6465D":"var(--third-text)"})},k(rl(e,f(ne))>0?"+":rl(e,f(ne))?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:f(H))((rl(e,f(ne))||0)*(rl(e,f(ne))>0?1:-1),1)),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("bought1"),align:"right","min-width":"100",width:f(K)(l.$t("bought1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"bought_usd"},{default:u(({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.bought_usd)?"#12B886":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.bought_usd)||0,1)),5),y("div",Ze,[y("span",{style:$({color:(null==e||e.bought,"var(--third-text)")})},k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.bought)||0,1)),5)])]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("sold1"),align:"right",width:f(K)(l.$t("sold1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"sold_usd"},{default:u(({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.sold_usd)||0,2)),5),y("div",Je,[y("span",{style:$({color:(null==e||e.sold,"var(--third-text)")})},k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.sold)||0,1)),5)])]),_:1},8,["label","width"]),c(g,{"class-name":"bg-12B8861A",label:l.$t("avgBuySell"),width:f(K)(l.$t("avgBuySell"))+70,align:"right","min-width":"120"},{default:u(({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e||e.avg_purchase_price,"var(--third-text)")}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.avg_purchase_price)||0,2)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e||e.avg_sale_price,"var(--third-text)")}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.avg_sale_price)||0,2)),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-286DFF1A",label:(null==(C=f(q)(f(tl).chain))?void 0:C.main_name)+l.$t("origin")+"/"+l.$t("time"),width:f(K)((null==(F=f(q)(f(tl).chain))?void 0:F.main_name)+l.$t("origin")+"/"+l.$t("time"))+70,align:"right","min-width":"150"},{default:u(({row:l})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.sol_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==l?void 0:l.sol_first_transfer_in_from)?(i(),p("a",{key:0,class:"address",href:"",onClick:v(e=>sl({holder:l.sol_first_transfer_in_from,remark:null==l?void 0:l.sol_first_transfer_in_from_remark}),["stop","prevent"])},[(i(),o(h,{key:l.sol_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:l.sol_first_transfer_in_from_remark,address:l.sol_first_transfer_in_from,chain:l.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Qe)):(i(),p("span",Ge,"-")),(null==l?void 0:l.sol_first_transfer_in_from)?(i(),o(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:$({color:e.searchOriginKeyword&&"sol"==e.searchOriginType?"var(--main-text)":""}),onClick:v(e=>dl(null==l?void 0:l.sol_first_transfer_in_from,"sol"),["stop","prevent"])},null,8,["style","onClick"])):_("",!0)],4),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.sol_first_transfer_in_time)?"var(--third-text":"var(--third-text)"}])},k(l.sol_first_transfer_in_time?f(Z)(l.sol_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-286DFF1A",label:(null==(S=f(ie))?void 0:S.symbol)+l.$t("origin")+"/"+l.$t("time"),align:"right","min-width":"150",width:f(K)((null==(V=f(ie))?void 0:V.symbol)+l.$t("origin")+"/"+l.$t("time"))+70},{default:u(({row:l})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.token_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==l?void 0:l.token_first_transfer_in_from)?(i(),p("a",{key:0,class:"address",href:"",onClick:v(e=>sl({holder:l.token_first_transfer_in_from,remark:null==l?void 0:l.token_first_transfer_in_from_remark}),["stop","prevent"])},[(i(),o(h,{key:l.token_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:l.token_first_transfer_in_from_remark,address:l.token_first_transfer_in_from,chain:l.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Xe)):(i(),p("span",el,"-")),(null==l?void 0:l.token_first_transfer_in_from)?(i(),o(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:$({color:e.searchOriginKeyword&&"other"==e.searchOriginType?"var(--d-F5F5F5-l-222)":""}),onClick:v(e=>dl(null==l?void 0:l.token_first_transfer_in_from,"other"),["stop","prevent"])},null,8,["style","onClick"])):_("",!0)],4),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==l||l.token_first_transfer_in_time,"var(--third-text)")}])},k(l.token_first_transfer_in_time?f(Z)(l.token_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-286DFF1A",label:l.$t("TFInOut"),align:"right",width:f(K)(l.$t("TFInOut"))+70},{default:u(({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_in)?"#12B886":"var(--third-text)"}])}," +"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.transfer_in)||0,1)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_out)?"#F6465D":"var(--third-text)"}])}," -"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.transfer_out)||0,1)),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-F6465D1A",label:l.$t("maxTx"),align:"right","min-width":"100",width:f(K)(l.$t("maxTx"))+70},{default:u(({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_purchase_usd)?"#12B886":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.max_single_purchase_usd)||0,1)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:f(H))((null==e?void 0:e.max_single_sold_usd)||0,1)),5)]),_:1},8,["label","width"]),c(g,{"class-name":"bg-F6465D1A",label:l.$t("lastTx"),width:f(K)(l.$t("lastTx"))+70,align:"right"},{default:u(({row:e})=>[z((i(),p("span",ll,[N(k(e.last_txn_time?f(J)(new Date(e.last_txn_time).getTime()).fromNow():""),1)])),[[T,f(Z)(e.last_txn_time,"YYYY-MM-DD HH:mm:ss")]])]),_:1},8,["label","width"])]}),_:1},8,["data","height"])),[[F,f(Q)&&!f(L).length]])])}}}),[["__scopeId","data-v-5722aab6"]]),al={class:"profit"},sl={class:"right"},rl=["innerHTML"],ol={key:2,class:"value"},il={class:"bottom"},nl={class:"item up"},dl={class:"label"},ul={class:"value"},cl={class:"label"},ml={class:"value"},vl={class:"item down"},fl={class:"label"},pl={class:"value"},_l={class:"label"},hl={class:"value"},bl=L(e({__name:"userTxsHead",props:{tableList:{},userAddress:{}},setup(e){const r=e,{t:n}=l(),u=te(),c=d(0),{mode:m}=t(a()),v=B(),{price:h,tokenInfoExtra:w}=t(T()),A=g(()=>v.params.id),N=g(()=>{var e;return(null==(e=ee(A.value))?void 0:e.address)||""}),C=g(()=>r.tableList.reduce((e,l)=>O(l)?e+R(l):e,0)),D=g(()=>r.tableList.reduce((e,l)=>O(l)?e+function(e){if(e.from_address===N.value)return e.from_amount;if(e.to_address===N.value)return e.to_amount;return e.amount0In>0?N.value===e.token0Address?e.amount0In:e.amount1Out:N.value===e.token1Address?e.amount1In:e.amount0Out}(l):e,0)),L=g(()=>r.tableList.reduce((e,l)=>O(l)?e:e+R(l),0)),F=g(()=>r.tableList.filter(e=>O(e)).length||0),S=g(()=>r.tableList.filter(e=>!O(e)).length||0),V=g(()=>D.value>0?C.value/D.value:0),E=g(()=>{var e;let l=((null==(e=null==w?void 0:w.value)?void 0:e.sell_tax)||0)/100;return l=l>1?1:l,(h.value||0)*(c.value||0)*(1-l)}),U=g(()=>({value:L.value+E.value-C.value})),z=g(()=>({value:C.value>0?U.value.value/C.value:0})),M=g(()=>{var e,l;return[{label:n("currentPosition"),value:c.value,prefix:""},{label:`${n("tokenValue")}${(null==(e=null==w?void 0:w.value)?void 0:e.sell_tax)?` (-${n("sellTax1")} ${H((null==(l=null==w?void 0:w.value)?void 0:l.sell_tax)||0,2)}%)`:""}`,value:E.value,prefix:"$"},{label:n("positionCostPrice"),value:V.value,prefix:"$"},{label:n("profit"),value:U.value.value,type:"profit"},{label:"",value:z.value.value,type:"profitChange"}]});function O(e){if(e.from_address&&e.from_address===N.value)return!1;if(e.to_address&&e.to_address===N.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==N.value}function R(e){return e.from_address===N.value?Number(e.from_amount)*Number(e.from_price_usd):e.to_address===N.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}async function P(){try{const e=v.params.id;if(e){const{chain:l}=ee(e),t=await ue(e,[r.userAddress+"-"+l]);if(t&&t[0]){const{value:e}=t[0];c.value=e}}}finally{}}return s(()=>r.tableList,e=>{(null==e?void 0:e.length)>0&&(c.value=0,P())},{deep:!0}),s(()=>r.userAddress,e=>{e&&(c.value=0,P())},{deep:!0}),(l,t)=>{var a;const s=ye;return i(),p(b,null,[e.userAddress===(null==(a=f(u))?void 0:a.evmAddress)?(i(),o(s,{key:0,class:"myTxs-notice",type:"warning",title:f(n)("myTxsNotice"),"show-icon":"",closable:"",style:$({backgroundColor:"light"===f(m)?"#ffa94d0d":"rgba(117, 65, 29, 0.23)",color:"#ED6A0C",border:"none"})},null,8,["title","style"])):_("",!0),y("div",al,[(i(!0),p(b,null,x(f(M),(e,t)=>(i(),p("div",{key:t,class:"profit-container"},[y("div",sl,[y("span",{class:"label",innerHTML:e.label},null,8,rl),"profit"===e.type?(i(),p("span",{key:0,class:"value",style:$({color:f(U).value>=0?f(ie)[0]:f(ne)[0]})},k(f(U).value>=0?"$"+f(H)(f(U).value):"-$"+f(H)(Math.abs(f(U).value))),5)):"profitChange"===e.type?(i(),p("span",{key:1,class:"value",style:$({color:f(U).value>=0?f(ie)[0]:f(ne)[0]})},k(("formatPercent"in l?l.formatPercent:f(de))(f(z).value)),5)):(i(),p("span",ol,k(e.prefix)+k(f(H)(e.value)),1))])]))),128))]),y("div",{class:"holder-container",style:$({"--upColor":f(ie)[0],"--downColor":f(ne)[0],"--upBgColor":"#12B88633","--downBgColor":"#ff646d33"})},[y("div",il,[y("div",nl,[y("div",null,[y("span",dl,k(f(n)("buyFrequency")),1),y("span",ul,k(f(H)(f(F))),1)]),y("div",null,[y("span",cl,k(f(n)("buyAmount"))+"($)",1),y("span",ml,k(f(H)(f(C))),1)])]),y("div",vl,[y("div",null,[y("span",fl,k(f(n)("sellFrequency")),1),y("span",pl,k(f(H)(f(S))),1)]),y("div",null,[y("span",_l,k(f(n)("sellAmount"))+"($)",1),y("span",hl,k(f(H)(f(L))),1)])])])],4)],64)}}}),[["__scopeId","data-v-4243258c"]]),xl={class:"histrory"},gl={class:"top"},yl={key:0,class:"content"},kl=["onClick"],wl=["innerHTML"],$l=L(e({__name:"userTxsList",props:{tableList:{type:Array,default:()=>[]},userAddress:{type:String,default:""},scrollHeight:{type:String,default:"350px"},loadingMyTx:Boolean},setup(e){const l=e,{mode:s}=t(a()),r=B();d(""!==l.userAddress);const{token:n}=t(T()),m=g(()=>r.params.id),h=g(()=>{var e;const l=m.value;return((null==(e=ee(l))?void 0:e.address)||"").toLowerCase()});function w(e){var l,t,a,s;if((null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===h.value)return!1;if((null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===h.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==h.value}function $(e){var l,t,a,s;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===h.value?e.from_amount:(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===h.value?e.to_amount:e.amount0In>0?h.value===e.token0Address?e.amount0In:e.amount1Out:h.value===e.token1Address?e.amount1In:e.amount0Out}function A(e){var l,t,a,s;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===h.value?e.from_price_usd:(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===h.value?e.to_price_usd:h.value===e.token0Address?e.token0PriceUSD:e.token1PriceUSD}function N(e){var l,t,a,s;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===h.value?Number(e.from_amount)*Number(e.from_price_usd):(null==(s=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:s.call(a))===h.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}return(e,t)=>{var a;const r=ge,d=he;return i(),p("div",xl,[c(bl,{tableList:l.tableList,userAddress:l.userAddress},null,8,["tableList","userAddress"]),y("div",gl,[y("span",null,k(e.$t("time")),1),y("span",null,k(e.$t("type")),1),y("span",null,k(e.$t("price"))+"($)",1),y("span",null,k(e.$t("amountB"))+"("+k(null==(a=f(n))?void 0:a.symbol)+")",1),y("span",null,k(e.$t("amountU"))+"($)",1),t[0]||(t[0]=y("span",null,"Tx",-1))]),c(d,{height:l.scrollHeight},{default:u(()=>[l.tableList.length>0?(i(),p("ul",yl,[(i(!0),p(b,null,x(l.tableList,(l,t)=>{var a,s;return i(),p("li",{key:t,class:"flex",onClick:v(e=>function(e){window.open(ce(e.network,e.transactionAddress,"tx"))}(l),["stop"])},[y("span",null,k(f(Z)(l.timestamp)),1),y("div",{class:P({green:w(l),red:!w(l)})},[y("span",null,k(w(l)?e.$t("buy"):e.$t("sell")),1)],2),y("div",{class:P({green:w(l),red:!w(l)})},[y("span",{innerHTML:f(H)(A(l)||0)},null,8,wl)],2),y("div",{class:P({green:w(l),red:!w(l)})},k(f(H)($(l))),3),y("span",null,k(f(H)(N(l))),1),y("span",null,k(null==(a=l.transactionAddress)?void 0:a.slice(0,2))+"..."+k(null==(s=l.transactionAddress)?void 0:s.slice(-4)),1)],8,kl)}),128))])):_("",!0),l.tableList&&0!==l.tableList.length?_("",!0):(i(),o(r,{key:1,"image-size":100,image:"light"===f(s)?f(Q):f(G)},null,8,["image"]))]),_:1},8,["height"])])}}}),[["__scopeId","data-v-600613fb"]]),Al={key:0,class:"flex-start address mt-20px"},Nl=["href"],Cl=e({__name:"profitLoss",props:{modelValue:Boolean},emits:["update:modelValue"],setup(e,{expose:l,emit:t}){const a=e;l({getUserTxs:function(e){x.value=e,b.value=[],h.value=!0;const l={token_id:$.value,user_address:e};me(l).then(e=>{b.value=e.map(e=>({...e,timestamp:1e3*Number(e.time)||0,network:e.chain||"bsc",transactionAddress:e.transaction,walletAddress:e.wallet_address}))}).finally(()=>{h.value=!1})}});const{modelValue:s}=F(a),n=B(),m=t,h=r(!1),b=d([]),x=r(""),w=g({get:()=>s.value,set(e){m("update:modelValue",e)}}),$=g(()=>n.params.id),A=g(()=>{var e;return null==(e=ee(n.params.id))?void 0:e.chain});return(e,l)=>{const t=R,a=ve,s=U("copy");return f(w)?(i(),o(a,{key:0,modelValue:f(w),"onUpdate:modelValue":l[1]||(l[1]=e=>M(w)?w.value=e:null),width:"860",height:"600","header-class":"p-0!","destroy-on-close":"",title:e.$t("transactionsDetails")},{default:u(()=>{var e,a;return[f(x)?(i(),p("div",Al,[y("span",null,[y("a",{href:f(ce)(f(A),f(x),"address"),target:"_blank"},k((null==(e=f(x))?void 0:e.slice(0,6))+"..."+(null==(a=f(x))?void 0:a.slice(-6))),9,Nl),z(c(t,{name:"bxs:copy",class:"text-12px ml-2px cursor-pointer ml-10px",onClick:l[0]||(l[0]=v(()=>{},["stop","prevent"]))},null,512),[[s,f(x)]])])])):_("",!0),c($l,{tableList:f(b),userAddress:f(x),loadingMyTx:f(h)},null,8,["tableList","userAddress","loadingMyTx"])]}),_:1},8,["modelValue","title"])):_("",!0)}}});export{tl as L,Cl as _};

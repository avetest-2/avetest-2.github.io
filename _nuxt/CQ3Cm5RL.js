import{g as e,gD as a,k as t,n as l,dE as s,gQ as n,q as o,D as r,G as u,h2 as i,F as d,cg as v,c,S as b,E as p,o as f,L as m,K as h,J as g,gO as y,nN as x,nO as N,nP as P,aW as w,gK as C,bN as $,ay as R,b as k,N as E,i7 as S,i2 as T,Q as B,Z as A,$ as F,i as V,gE as j,hC as K,am as L,gN as _,U as O,cC as M,a0 as W,h3 as z,ak as Q,nQ as q,M as D,P as I,a1 as U,hh as G}from"./pxHhHUe5.js";import{u as H,c as J}from"./B3CwgMQF.js";import{c as X}from"./BC28JpVo.js";import{r as Y}from"./DU6RBO19.js";import{c as Z}from"./Ss6PgMLe.js";const ee=Symbol("tabsRootContextKey"),ae=e({tabs:{type:t(Array),default:()=>a([])},tabRefs:{type:t(Object),default:()=>a({})}}),te="ElTabBar";var le=l({name:te,__name:"tab-bar",props:ae,setup(e,{expose:a}){const t=e,l=s(ee);l||n(te,"<el-tabs><el-tab-bar /></el-tabs>");const x=o("tabs"),N=d(),P=d(),w=p(()=>{var e;return y(l.props.defaultValue)||Boolean(null==(e=P.value)?void 0:e.transform)}),C=()=>P.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(y(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${X(o)}`],a=n[`client${X(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${X(n)}(${e}px)`}})(),$=[];r(()=>t.tabs,async()=>{await u(),C(),$.forEach(e=>e.stop()),$.length=0,Object.values(t.tabRefs).forEach(e=>{$.push(i(e,C))})},{immediate:!0});const R=i(N,()=>C());return v(()=>{$.forEach(e=>e.stop()),$.length=0,R.stop()}),a({ref:N,update:C}),(e,a)=>w.value?(f(),c("div",{key:0,ref_key:"barRef",ref:N,class:h([g(x).e("active-bar"),g(x).is(g(l).props.tabPosition)]),style:m(P.value)},null,6)):b("v-if",!0)}});const se=e({panes:{type:t(Array),default:()=>a([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),ne="ElTabNav",oe=l({name:ne,props:se,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=s(ee);l||n(ne,"<el-tabs><tab-nav /></el-tabs>");const v=o("tabs"),c=x(),b=N(),f=d(),m=d(),h=d(),g=d({}),y=d(),V=d(!1),j=d(0),K=d(!1),L=d(!0),_=R(),O=p(()=>["top","bottom"].includes(l.props.tabPosition)),M=p(()=>O.value?"width":"height"),W=p(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${j.value}px)`})),{width:z,height:Q}=P(f),{width:q,height:D}=P(m,{width:0,height:0},{box:"border-box"}),I=p(()=>O.value?z.value:Q.value),U=p(()=>O.value?q.value:D.value),{onWheel:G}=H({atStartEdge:p(()=>j.value<=0),atEndEdge:p(()=>U.value-j.value<=I.value),layout:p(()=>O.value?"horizontal":"vertical")},e=>{j.value=Z(j.value+e,0,U.value-I.value)}),J=()=>{if(!f.value)return;const e=f.value[`offset${X(M.value)}`],a=j.value;if(!a)return;const t=a>e?a-e:0;j.value=t},ae=()=>{if(!f.value||!m.value)return;const e=m.value[`offset${X(M.value)}`],a=f.value[`offset${X(M.value)}`],t=j.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;j.value=l},te=async()=>{const a=m.value;if(!(V.value&&h.value&&f.value&&a))return;await u();const t=g.value[e.currentName];if(!t)return;const l=f.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=O.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=j.value;let i=r;O.value?(s.left<n.left&&(i=r-(n.left-s.left)),s.right>n.right&&(i=r+s.right-n.right)):(s.top<n.top&&(i=r-(n.top-s.top)),s.bottom>n.bottom&&(i=r+(s.bottom-n.bottom))),i=Math.max(i,0),j.value=Math.min(i,o)},se=()=>{var a;if(!m.value||!f.value)return;e.stretch&&(null==(a=y.value)||a.update());const t=m.value[`offset${X(M.value)}`],l=f.value[`offset${X(M.value)}`],s=j.value;l<t?(V.value=V.value||{},V.value.prev=s,V.value.next=s+l<t,t-s<l&&(j.value=t-l)):(V.value=!1,s>0&&(j.value=0))},oe=e=>{let a=0;switch(A(e)){case F.left:case F.up:a=-1;break;case F.right:case F.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),re()},re=()=>{L.value&&(K.value=!0)},ue=()=>K.value=!1;return r(c,e=>{"hidden"===e?L.value=!1:"visible"===e&&setTimeout(()=>L.value=!0,50)}),r(b,e=>{e?setTimeout(()=>L.value=!0,50):L.value=!1}),i(h,()=>{Y(se)}),w(()=>setTimeout(()=>te(),0)),C(()=>se()),a({scrollToActiveTab:te,removeFocus:ue,focusActiveTab:async()=>{await u();const a=g.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:m,tabBarRef:y,scheduleRender:()=>$(_)}),()=>{const a=V.value?[k("span",{class:[v.e("nav-prev"),v.is("disabled",!V.value.prev)],onClick:J},[k(E,null,{default:()=>[k(S,null,null)]})]),k("span",{class:[v.e("nav-next"),v.is("disabled",!V.value.next)],onClick:ae},[k(E,null,{default:()=>[k(T,null,null)]})])]:null,s=e.panes.map((a,s)=>{var n,o,r,u,i;const d=a.uid,c=a.props.disabled,b=null!=(o=null!=(n=a.props.name)?n:a.index)?o:`${s}`,p=!c&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${s}`;const f=p?k(E,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[k(B,null,null)]}):null,m=(null==(u=(r=a.slots).label)?void 0:u.call(r))||a.props.label,h=!c&&a.active?null!=(i=e.tabindex)?i:l.props.tabindex:-1;return k("div",{ref:e=>((e,a)=>{g.value[a]=e})(e,b),class:[v.e("item"),v.is(l.props.tabPosition),v.is("active",a.active),v.is("disabled",c),v.is("closable",p),v.is("focus",K.value)],id:`tab-${b}`,key:`tab-${d}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>re(),onBlur:()=>ue(),onClick:e=>{ue(),t("tabClick",a,b,e)},onKeydown:e=>{const l=A(e);!p||l!==F.delete&&l!==F.backspace||t("tabRemove",a,e)}},[m,f])});return _.value,k("div",{ref:h,class:[v.e("nav-wrap"),v.is("scrollable",!!V.value),v.is(l.props.tabPosition)]},[a,k("div",{class:v.e("nav-scroll"),ref:f},[e.panes.length>0?k("div",{class:[v.e("nav"),v.is(l.props.tabPosition),v.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:m,style:W.value,role:"tablist",onKeydown:oe,onWheel:G},[e.type?null:k(le,{ref:y,tabs:[...e.panes],tabRefs:g.value},null),s]):null])])}}}),re=e({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:t(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ue=e=>V(e)||j(e),ie=l({name:"ElTabs",props:re,emits:{[O]:e=>ue(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ue(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ue(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=o("tabs"),i=p(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:c,removeChild:b,ChildrenSorter:f}=J(M(),"ElTabPane"),m=d(),h=d(null!=(s=y(e.modelValue)?e.defaultValue:e.modelValue)?s:"0"),g=async(t,l=!1)=>{var s,n,o,r;if(h.value!==t&&!y(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,h.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=v.value.find(e=>e.paneName===h.value))?void 0:s.isFocusInsidePane();h.value=t,l&&(a(O,t),a("tabChange",t)),null==(o=null==(n=m.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(r=m.value)||r.focusActiveTab())}}catch(u){}},x=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),g(t,!0))},N=(e,t)=>{e.props.disabled||y(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},P=()=>{a("edit",void 0,"add"),a("tabAdd")},w=e=>{const a=A(e);[F.enter,F.numpadEnter].includes(a)&&P()},C=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return r(()=>e.modelValue,e=>g(e)),r(h,async()=>{var e;await u(),null==(e=m.value)||e.scrollToActiveTab()}),W(ee,{props:e,currentName:h,registerPane:c,unregisterPane:b,nav$:m}),l({currentName:h,get tabNavRef(){return K(m.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?k("div",{class:[n.e("new-tab"),i.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:P,onKeydown:w},[a?L(t,"add-icon"):k(E,{class:n.is("icon-plus")},{default:()=>[k(_,null,null)]})]):null,s=k("div",{class:[n.e("header"),i.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[k(f,null,{default:()=>k(oe,{ref:m,currentName:h.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:x,onTabRemove:N},null),$stable:!0}),l]),o=k("div",{class:n.e("content")},[L(t,"default")]);return k("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:C,onVnodeUpdated:C},[o,s])}}}),de=e({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ve=["id","aria-hidden","aria-labelledby"],ce="ElTabPane";var be=l({name:ce,__name:"tab-pane",props:de,setup(e){const a=e,t=M(),l=z(),u=s(ee);u||n(ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=o("tab-pane"),m=d(),y=d(),x=p(()=>{var e;return null!=(e=a.closable)?e:u.props.closable}),N=p(()=>{var e;return u.currentName.value===(null!=(e=a.name)?e:y.value)}),P=d(N.value),w=p(()=>{var e;return null!=(e=a.name)?e:y.value}),C=p(()=>!a.lazy||P.value||N.value);r(N,e=>{e&&(P.value=!0)});const $=Q({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:w,active:N,index:y,isClosable:x,isFocusInsidePane:()=>{var e;return null==(e=m.value)?void 0:e.contains(document.activeElement)}});return u.registerPane($),v(()=>{u.unregisterPane($)}),q(()=>{var e;l.label&&(null==(e=u.nav$.value)||e.scheduleRender())}),(e,a)=>C.value?D((f(),c("div",{key:0,id:`pane-${w.value}`,ref_key:"paneRef",ref:m,class:h(g(i).b()),role:"tabpanel","aria-hidden":!N.value,"aria-labelledby":`tab-${w.value}`},[L(e.$slots,"default")],10,ve)),[[I,N.value]]):b("v-if",!0)}});const pe=U(ie,{TabPane:be}),fe=G(be);export{fe as E,pe as a};

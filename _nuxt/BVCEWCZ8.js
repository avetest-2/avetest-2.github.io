import{n as e,av as l,a3 as a,a2 as t,F as o,D as n,a7 as r,c as s,o as u,a5 as i,a as p,b as c,S as d,al as m,K as v,t as f,a6 as x,J as g,ak as b,aa as k,w as _,I as h,aP as y,T as w,d as C,aQ as F,M as V,H as $,bp as N,E as G,bq as R,aT as A,G as D,_ as E}from"./pxHhHUe5.js";import{E as j}from"./uG3PizZo.js";import z from"./B2dydDoX.js";import{V as I}from"./B-cUoYio.js";const S={class:"w-tabs flex-1 flex-wrap"},q=["onClick"],M={class:"clickable color-[--secondary-text]! flex gap-2px bg-[--main-input-button-bg]!"},U={class:"font-500 text-14px lh-[120%] tracking-0% text-[--main-text]"},B={class:"mb-8px text-14px lh-[120%]"},O={class:"flex-between w-100%"},P={class:"flex-between w-100%"},T=E(e({__name:"proGroups",props:{options:{type:Array,default:()=>[]},modelValue:{type:Number,default:0}},emits:["onConfirm","onDelete","onCancel","update:modelValue","onChangeIndex","onAdd","update:options"],setup(e,{emit:E}){const{t:T}=l(),{lang:H,isDark:J}=a(t()),K=E,L=e,Q=o({buttonRefs:{}}),Z=o(L.options);n(()=>L.options,e=>{Z.value=e});const W=o(),X=b({groupName:""}),Y=G(()=>({groupName:[{required:!0,message:T("groupName")+(H.value.indexOf("zh")>-1?"":"&nbsp;")+T("cannotBeEmpty"),trigger:"change"}]})),ee=o(""),le=o({}),ae=o(),te=o(!1),oe=o(),ne=o(),re=o(),se=o(),ue=o(!1);function ie(){Z.value=L.options}function pe(){te.value=!1,le.value[ae.value]=!1}function ce(){le.value[ae.value]=!0,D(()=>{var e;null==(e=document.querySelector(".name-input input"))||e.focus()})}function de(){le.value[ae.value]=!1,K("onCancel",ae.value)}function me(){K("onDelete",ae.value)}function ve(){var e,l;K("onAdd",ee.value),null==(l=null==(e=re.value)?void 0:e.close)||l.call(e)}function fe(){var e,l;null==(l=null==(e=se.value)?void 0:e.hide)||l.call(e),K("onChangeIndex",Z.value.map(e=>e.group_id))}return n(()=>le.value,e=>{},{deep:!0}),n(ee,e=>{}),(e,l)=>{const a=k,t=j,o=w,n=F,b=A,G=R,D=N,E=r("click-outside");return u(),s(i,null,[p("ul",S,[p("li",{class:v(["clickable text-[--third-text]",{active:0===L.modelValue}]),onClick:l[0]||(l[0]=m(e=>K("update:modelValue",0),["stop","prevent"]))},[p("span",null,f(e.$t("defaultGroup")),1)],2),L.options.length>0?(u(!0),s(i,{key:0},x(L.options,e=>(u(),s("li",{key:e.group_id,class:v(["clickable flex gap-2px text-[--third-text]",{active:L.modelValue===e.group_id}]),onClick:m(l=>K("update:modelValue",e.group_id),["stop","prevent"])},[p("span",null,f(e.name),1),c(a,{ref_for:!0,ref:l=>g(Q).buttonRefs[e.group_id]=l,name:"mdi:dots-vertical",class:"text-14px",onClick:m(l=>{oe.value=g(Q).buttonRefs[e.group_id],te.value=!0,ae.value=e.group_id,g(X).groupName=e.name},["stop","prevent"])},null,8,["onClick"])],10,q))),128)):d("",!0),p("li",{ref_key:"addButtonRef",ref:ne,class:"clickable color-[--secondary-text]! flex gap-2px bg-[--main-input-button-bg]!",onClick:l[1]||(l[1]=m(e=>{var l,a,t;return null==(t=null==(a=null==(l=g(re))?void 0:l.popoverRef)?void 0:a.show)?void 0:t.call(a)},["stop","prevent"]))},[c(a,{name:"custom:add-icon",class:"text-12px"}),p("span",null,f(e.$t("newGroup")),1)],512),c(n,{ref_key:"popoverRef2",ref:se,width:320,trigger:"click",onAfterLeave:ie},{reference:_(()=>[p("li",M,[c(a,{name:"custom:list-icon",class:"text-12px"}),p("span",null,f(e.$t("groupManage")),1)])]),default:_(()=>[p("div",U,[p("div",B,f(e.$t("groupManage")),1),c(t,{"wrap-class":"mb-12px max-h-[400px]"},{default:_(()=>[c(g(I),h({modelValue:g(Z),"onUpdate:modelValue":l[2]||(l[2]=e=>y(Z)?Z.value=e:null),class:"flex flex-col",tag:"ul"},{animation:300},{"item-key":"show_index",onStart:l[3]||(l[3]=e=>ue.value=!0),onEnd:l[4]||(l[4]=e=>ue.value=!1)}),{default:_(()=>[(u(!0),s(i,null,x(g(Z),e=>(u(),s("li",{key:null==e?void 0:e.show_index,class:"flex-between font-400 py-12px px-8px hover:bg-[--d-2A2A2A-l-F2F2F2] cursor-move"},[p("span",null,f(null==e?void 0:e.name),1),c(a,{name:"material-symbols:dehaze",class:"text-16px text-[--third-text]"})]))),128))]),_:1},16,["modelValue"])]),_:1}),p("div",O,[c(o,{color:g(J)?"#1F242C":"#D9E8FF",class:"flex-1",onClick:l[5]||(l[5]=m(()=>{var e,l;return null==(l=null==(e=g(se))?void 0:e.hide)?void 0:l.call(e)},["stop","prevent"]))},{default:_(()=>[C(f(e.$t("cancel")),1)]),_:1},8,["color"]),c(o,{type:"primary",class:"flex-1",color:"#3F80F7",onClick:m(fe,["stop","prevent"])},{default:_(()=>[C(f(e.$t("confirm")),1)]),_:1})])])]),_:1},512)]),c(n,{visible:g(te),"virtual-ref":g(oe),trigger:"click",title:"","virtual-triggering":"","popper-style":"width: 86px;min-width: 86px;"},{default:_(()=>[V((u(),s("ul",null,[p("li",{class:"font-400 text-12px lh-[100%] tracking-0px mb-20px flex-start gap-4px clickable",onClick:m(ce,["stop","prevent"])},[c(a,{name:"fe:edit",class:"color-#666 text-14px mt-0px"}),p("span",null,f(e.$t("rename")),1)]),p("li",{class:"font-400 text-12px lh-[100%] tracking-0px clickable flex-start gap-4px",onClick:m(me,["stop","prevent"])},[c(a,{name:"bx:bxs-trash-alt",class:"text-15px color-#666 mt-0px"}),p("span",null,f(e.$t("delete")),1)])])),[[E,()=>te.value=!1]])]),_:1},8,["visible","virtual-ref"]),c(n,{visible:g(le)[g(ae)],"virtual-ref":g(oe),trigger:"click",title:e.$t("rename"),"virtual-triggering":"","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--main-text)",width:"248",teleported:!1},{default:_(()=>[V((u(),$(D,{ref_key:"formRef",ref:W,model:g(X),rules:g(Y),onSubmit:l[7]||(l[7]=m(e=>{var l;(l=g(W))&&l.validate((e,l)=>{var a;e&&(K("onConfirm",ae.value,X.groupName),null==(a=W.value)||a.resetFields(),le.value[ae.value]=!1)})},["prevent","stop"]))},{default:_(()=>[c(G,{prop:"groupName","label-position":"top",size:"large",class:"mb-20px!"},{default:_(()=>[c(b,{modelValue:g(X).groupName,"onUpdate:modelValue":l[6]||(l[6]=e=>g(X).groupName=e),class:"[&&]:[--el-fill-color-blank:var(--d-666-l-F2F2F2)] [%%]:[el-input__count-inner:transparent]",placeholder:g(T)("enterGroupName"),maxlength:50,"show-word-limit":"",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),c(G,{class:"mb-0px!"},{default:_(()=>[p("div",P,[c(o,{color:g(J)?"#1F242C":"#D9E8FF",class:"flex-1",onClick:m(de,["stop","prevent"])},{default:_(()=>[C(f(e.$t("cancel")),1)]),_:1},8,["color"]),c(o,{type:"primary",color:"#3F80F7",class:"flex-1","native-type":"submit"},{default:_(()=>[C(f(e.$t("confirm")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])),[[E,pe]])]),_:1},8,["visible","virtual-ref","title"]),c(z,{ref_key:"proPopoverRef",ref:re,modelValue:g(ee),"onUpdate:modelValue":l[8]||(l[8]=e=>y(ee)?ee.value=e:null),"button-ref":g(ne)||{},width:"248",label:e.$t("newGroup"),placeholder:e.$t("enterGroupName"),prop:"name",title:e.$t("newGroup"),onOnConfirm:ve},null,8,["modelValue","button-ref","label","placeholder","title"])],64)}}}),[["__scopeId","data-v-3ce14d91"]]);export{T as default};

import{n as e,a3 as l,av as a,aA as t,ai as o,az as s,a2 as i,at as n,au as r,cF as d,aW as u,ay as c,a7 as p,c as m,o as v,a as f,b as x,H as y,S as h,J as b,aw as g,bT as k,d as w,M as N,t as _,E as A,aa as T,aP as S,w as L,a5 as z,a6 as $,ac as I,a8 as R,ad as j,cS as C,a9 as V,_ as U,d9 as D,F as E,aQ as P,aY as Y,aX as M,T as F,al as q,K as H,e as O,W as Z,cN as W,aK as B,ax as K,D as X,o7 as J,fm as Q,bC as G,bF as ee,bE as le,dm as ae,aE as te,dp as oe}from"./pxHhHUe5.js";import{E as se,a as ie}from"./BC28JpVo.js";import"./xG3n2otq.js";import"./uG3PizZo.js";import{_ as ne}from"./CxWYx9-y.js";import{S as re}from"./EKWuchHU.js";import{u as de,_ as ue,T as ce}from"./DgJnBxr4.js";import{g as pe,h as me,i as ve,j as fe}from"./DcJMJbTu.js";import{a as xe,E as ye}from"./DlhmlHT6.js";import{_ as he}from"./DqA6dxmG.js";import"./Ss6PgMLe.js";import"./b94L9vb_.js";import"./D5SrGyNL.js";import"./BwPtREp8.js";import"./liJ_O3Tw.js";import"./DU6RBO19.js";const be={class:"w-full"},ge={class:"flex-start"},ke={class:"flex gap-6"},we={class:"flex items-center mb-1.5"},Ne={class:"flex items-center gap-2"},_e={class:"statistic-address-copy flex items-center justify-center px-2 py-1.75 h-6 rounded text-3 gap-1 text-[--third-text] bg-[--main-input-button-bg]"},Ae={class:"flex-start",style:{gap:"4px"}},Te={class:"flex mt-27px gap-12px"},Se={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Le={class:"text-14px color-[--third-text] block mb-10px"},ze={key:0,class:"text-18px color-[--up-color]"},$e={key:1,class:"text-18px color-[--down-color]"},Ie={key:2,class:"text-18px color-[--secondary-text]"},Re={key:3,class:"text-12px color-[--up-color]"},je={key:4,class:"text-12px color-[--down-color]"},Ce={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Ve={class:"text-14px color-[--third-text] block mb-10px"},Ue={key:0,class:"text-18px color-[--up-color]"},De={key:1,class:"text-18px color-[--down-color]"},Ee={key:2,class:"text-18px color-[--secondary-text]"},Pe={key:3,class:"text-12px color-[--up-color]"},Ye={key:4,class:"text-12px color-[--down-color]"},Me={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Fe={class:"text-14px color-[--third-text] block mb-10px"},qe={key:0,class:"text-18px color-[--main-text]"},He={key:1,class:"text-18px color-[--secondary-text]"},Oe={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Ze={class:"text-14px color-[--third-text] block mb-10px"},We={class:"text-18px color-[--secondary-text]"},Be={key:0,class:"color-[--up-color]"},Ke={key:1,class:"color-[--secondary-text]"},Xe={key:2,class:"color-[--secondary-text]"},Je={key:3,class:"color-[--secondary-text]"},Qe={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Ge={class:"text-14px color-[--third-text] block mb-10px"},el={key:0,class:"text-18px color-[--main-text]"},ll={key:1,class:"text-18px color-[--secondary-text]"},al=U(e({__name:"statistic",props:{chain:{type:String,default:""},address:{type:String,default:""},followAddress:{type:String,default:""}},setup(e,{expose:U}){const D=e,{copyObj:E,copyOrder:P}=l(de()),{getFollowingInfo:Y}=de(),{t:M}=a(),F=t();o();const{address:q,chain:H,followAddress:O}=s(D);i();const Z=n();r(),d();const{userInfo:W}=l(n()),B=c(""),K=A(()=>{var e,l,a,t,o,s;const i=(null==(a=null==(l=null==(e=P.value)?void 0:e.copyList)?void 0:l.filter(e=>e.followAddress==O.value))?void 0:a.map(e=>e.chain))||[];if(Z.evmAddress){const e=null==(s=null==(o=null==(t=Z.userInfo)?void 0:t.addresses)?void 0:o.filter)?void 0:s.call(o,e=>null==i?void 0:i.includes(e.chain));if(e&&e.length>0)return e}return[{chain:H.value}]}),X=A(()=>O.value.slice(0,4)+"..."+O.value.slice(-4));async function J(e){var l,a,t;E.value=null==(a=null==(l=P.value)?void 0:l.copyList)?void 0:a.find(l=>l.chain===e&&l.followAddress==O.value),(null==(t=E.value)?void 0:t.id)?Q():E.value={followAddress:O.value,creatorAddress:q.value,totalTokenCount:0,winToken:0,profitRealized:"0",profitUnrealized:"0",lastSwap:"0",chain:B.value};const o={name:"copy-trade-wallet",params:{userAddress:E.value.followAddress,chain:E.value.chain},query:{followAddress:E.value.followAddress,creatorAddress:E.value.creatorAddress,id:E.value.id}};C(o)}function Q(){var e,l;const a={id:(null==(e=E.value)?void 0:e.id)||F.query.id,chain:(null==(l=E.value)?void 0:l.chain)||F.params.chain};pe(a).then(e=>{E.value={...e,lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?e.lastSwap:"0"}})}function G(){Q()}function ee(){window.open(V(H.value,q.value,"address"))}return u(async()=>{var e,l,a,t,o;B.value=H.value,0!=(null==(l=null==(e=P.value)?void 0:e.copyList)?void 0:l.length)&&P.value||(await Y(),E.value=null==(t=null==(a=P.value)?void 0:a.copyList)?void 0:t.find(e=>e.chain===B.value&&e.followAddress==O.value)),((null==(o=E.value)?void 0:o.id)||F.query.id)&&Q()}),U({mergeStatistics:function(e){}}),(e,l)=>{var a,t,o,s,i,n,r,d,u,c,A,C,V,U,P,Y,M,F,H,W,Q,le,ae,te,oe,de,ce,pe,me,ve,fe,xe;const ye=T,he=ie,al=se,tl=p("copy");return v(),m("div",be,[f("div",ge,[f("div",ke,[(v(),y(g,{key:null==(a=b(E))?void 0:a.followAddress,wallet_logo:{url:null==(t=b(E))?void 0:t.followAddress,logo:null==(o=b(E))?void 0:o.followIconUrl},address:b(O),chain:b(B),iconSize:"60px"},null,8,["wallet_logo","address","chain"])),f("div",null,[f("div",we,[b(q)?(v(),y(k,{key:b(O),class:"gap-1.5 text-6 leading-7.5 text-[--main-text]",address:b(O),chain:b(B),remark:null==(s=b(E))?void 0:s.followName,iconEditSize:"16px",maxRemarkLength:15,onUpdateRemark:l[0]||(l[0]=({remark:e})=>b(E).followName=e)},null,8,["address","chain","remark"])):h("",!0)]),f("div",Ne,[f("div",{class:"statistic-address flex gap-2.5 cursor-pointer",onClick:ee},[f("div",_e,[w(_(b(X))+" ",1),N(x(ye,{name:"bxs:copy",class:"text-2.5 clickable text-[--third-text]"},null,512),[[tl,b(O)]])])])])])]),l[2]||(l[2]=f("div",{class:"flex-1"},null,-1)),x(al,{class:"mr-9px",style:{width:"120px"},"suffix-icon":re,modelValue:b(B),"onUpdate:modelValue":l[1]||(l[1]=e=>S(B)?B.value=e:null),persistent:!1,onChange:J},{prefix:L(()=>[x(ne,{chain:b(B),width:16},null,8,["chain"])]),default:L(()=>[(v(!0),m(z,null,$(b(K),({chain:l})=>{var a;return v(),y(he,{key:l,label:null==(a=("getChainInfo"in e?e.getChainInfo:b(I))(l))?void 0:a.name,value:l},{default:L(()=>{var a;return[f("div",Ae,[x(ne,{chain:l,width:16},null,8,["chain"]),w(" "+_(null==(a=("getChainInfo"in e?e.getChainInfo:b(I))(l))?void 0:a.name),1)])]}),_:2},1032,["label","value"])}),128))]),_:1},8,["modelValue"]),b(Z).evmAddress?(v(),y(ue,{key:0,id:null==(i=b(E))?void 0:i.id,chain:D.chain,status:b(E).status,onUpdataRow:G},null,8,["id","chain","status"])):h("",!0)]),f("div",Te,[f("div",Se,[f("span",Le,_(e.$t("realizedProfit")),1),f("div",null,[Number(null==(n=b(E))?void 0:n.profitRealized)>0?(v(),m("span",ze,"+$"+_(("formatNumber"in e?e.formatNumber:b(R))((null==(r=b(E))?void 0:r.profitRealized)||0,2)),1)):Number(null==(d=b(E))?void 0:d.profitRealized)<0?(v(),m("span",$e,"-$"+_(("formatNumber"in e?e.formatNumber:b(R))(Math.abs(Number((null==(u=b(E))?void 0:u.profitRealized)||0)),2)),1)):(v(),m("span",Ie,"0")),Number(null==(c=b(E))?void 0:c.profitRealizedRatio)>0?(v(),m("span",Re,"("+_(("formatNumber"in e?e.formatNumber:b(R))((null==(A=b(E))?void 0:A.profitRealizedRatio)||0,2))+"%)",1)):Number(null==(C=b(E))?void 0:C.profitRealizedRatio)<0?(v(),m("span",je,"("+_(("formatNumber"in e?e.formatNumber:b(R))((null==(V=b(E))?void 0:V.profitRealizedRatio)||0,2))+"%)",1)):h("",!0)])]),f("div",Ce,[f("span",Ve,_(e.$t("unrealizedProfit")),1),f("div",null,[Number(null==(U=b(E))?void 0:U.profitUnrealized)>0?(v(),m("span",Ue,"+$"+_(("formatNumber"in e?e.formatNumber:b(R))((null==(P=b(E))?void 0:P.profitUnrealized)||0,2)),1)):Number(null==(Y=b(E))?void 0:Y.profitUnrealized)<0?(v(),m("span",De,"-$"+_(("formatNumber"in e?e.formatNumber:b(R))(Math.abs(Number((null==(M=b(E))?void 0:M.profitUnrealized)||0)),2)),1)):(v(),m("span",Ee,"0")),Number(null==(F=b(E))?void 0:F.profitUnrealizedRatio)>0?(v(),m("span",Pe,"("+_(("formatNumber"in e?e.formatNumber:b(R))((null==(H=b(E))?void 0:H.profitUnrealizedRatio)||0,2))+"%)",1)):Number(null==(W=b(E))?void 0:W.profitUnrealizedRatio)<0?(v(),m("span",Ye,"("+_(("formatNumber"in e?e.formatNumber:b(R))((null==(Q=b(E))?void 0:Q.profitUnrealizedRatio)||0,2))+"%)",1)):h("",!0)])]),f("div",Me,[f("span",Fe,_(e.$t("positionsValue")),1),Number(null==(le=b(E))?void 0:le.holdingUsd)>0?(v(),m("span",qe,"$"+_(("formatNumber"in e?e.formatNumber:b(R))((null==(ae=b(E))?void 0:ae.holdingUsd)||0,2)),1)):(v(),m("span",He,"0"))]),f("div",Oe,[f("span",Ze,_(e.$t("winTokenTotal")),1),f("div",We,[Number(null==(te=b(E))?void 0:te.winToken)>0?(v(),m("span",Be,_(("formatNumber"in e?e.formatNumber:b(R))((null==(oe=b(E))?void 0:oe.winToken)||0,2)),1)):(v(),m("span",Ke,"0")),l[3]||(l[3]=w(" / ",-1)),Number(null==(de=b(E))?void 0:de.totalTokenCount)>0?(v(),m("span",Xe,_(("formatNumber"in e?e.formatNumber:b(R))((null==(ce=b(E))?void 0:ce.totalTokenCount)||0,2)),1)):(v(),m("span",Je,"0"))])]),f("div",Qe,[f("span",Ge,_(e.$t("lastSwapTime")),1),Number(null==(pe=b(E))?void 0:pe.createTime)>0?(v(),m("span",el,_(Number(null==(me=b(E))?void 0:me.createTime)>0?("formatDate"in e?e.formatDate:b(j))((null==(ve=b(E))?void 0:ve.createTime)||0,"YYYY-MM-DD HH:mm"):"--")+" ~ "+_(Number(null==(fe=b(E))?void 0:fe.finishTime)>0?("formatDate"in e?e.formatDate:b(j))((null==(xe=b(E))?void 0:xe.finishTime)||0,"YYYY-MM-DD HH:mm"):e.$t("today")),1)):(v(),m("span",ll,"--"))])])])}}}),[["__scopeId","data-v-0b6233f7"]]),tl={key:1},ol={class:"mt-20px flex justify-between"},sl={key:0,class:"bg-[#12B8861A] color-[--up-color] px-4px rounded-2px ml-5px text-10px"},il={key:1,class:"bg-[#F6465D1A] color-[--down-color] px-4px rounded-2px ml-5px text-10px"},nl={class:"flex items-center flex-1"},rl={class:"flex flex-col items-start"},dl={class:"text-12px flex items-center"},ul=["src"],cl={class:"text-12px"},pl={key:0,class:"color-[--up-color]"},ml={key:1,class:"color-[--down-color]"},vl={key:2,class:"color-[--third-text]"},fl={class:"color-[--down-color] text-12px"},xl={class:"flex-end"},yl={class:"ml-5 a-gray font-16",href:"javascript:;"},hl=U(e({__name:"tokenList",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},type:{type:String,default:""},address:String},emits:["search"],setup(e,{expose:l,emit:i}){const d=e,{tableData:u,loading:c,type:g,address:k}=s(d),S=i;l({reset:se});const{t:I}=a(),C=D(),U=t(),X=o();function J(e){"token"==g.value?C.$patch({drawerVisible:!0,tokenInfo:{id:e.token+"-"+e.chain,symbol:e.symbol,logo_url:e.logo_url,chain:e.chain,address:e.token,remark:""},pairInfo:{target_token:e.token,token0_address:e.token,token0_symbol:e.symbol,token1_symbol:"",pairAddress:""},user_address:U.params.userAddress||n().getWalletAddress(e.chain)||r().address}):Q(e)}const Q=e=>{X.push({name:"token-id",params:{id:e.token+"-"+e.chain},query:{from:U.name}})};const G=E({checkAll:!0}),ee=E({type:{visible:!1,checkAll:!1,checkedTrend:[],isIndeterminate:!1}}),le=A(()=>[{id:"buy",name:"买入"},{id:"sell",name:"卖出"}]);function ae(e){var l;ee.value.type.checkedTrend=e?null==(l=le.value)?void 0:l.map(e=>e.id):[],ee.value.type.isIndeterminate=!1}function te(e){const l=e.length,a=l===le.value.length,t=l>0&&l<le.value.length;ee.value.type.checkAll=a,ee.value.type.isIndeterminate=t}function oe(){S("search",{type:ee.value.type.checkAll?"all":ee.value.type.checkedTrend}),ee.value.type.visible=!1}function se(){ee.value.type.checkAll=!0,ee.value.type.checkedTrend=["buy","sell"],ee.value.type.isIndeterminate=!0}function ie(){se(),oe()}return I("copyErrorLog2"),I("copyErrorLog3"),I("copyErrorLog4"),I("copyErrorLog5"),I("copyErrorLog6"),I("copyErrorLog7"),I("copyErrorLog8"),(e,l)=>{const a=T,t=Y,o=M,s=F,i=P,n=ye,r=W,d=Z,k=O,A=he,S=ne,I=xe,C=p("tooltip");return v(),m("div",null,[x(I,{ref:"table_ref",data:b(u),fit:"","header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--secondary-text]","row-class-name":"cursor-pointer",onRowClick:J},{empty:L(()=>[b(c)||0!==b(u).length?(v(),m("span",tl)):(v(),y(K,{key:0,class:"pt-[40px]"}))]),default:L(()=>["success"===b(g)||"failed"===b(g)?(v(),y(n,{key:0,label:e.$t("type"),fixed:"left"},{header:L(()=>[f("span",null,_(e.$t("type")),1),x(i,{visible:b(ee).type.visible,"onUpdate:visible":l[2]||(l[2]=e=>b(ee).type.visible=e),placement:"bottom",width:207,trigger:"click"},{reference:L(()=>[x(a,{name:"custom:filter",class:H(["cursor-pointer text-10px ml-3px",b(G).checkAll?"color-[--third-text]":"color-[--primary-color]"])},null,8,["class"])]),default:L(()=>[f("div",null,[x(t,{modelValue:b(ee).type.checkAll,"onUpdate:modelValue":l[0]||(l[0]=e=>b(ee).type.checkAll=e),indeterminate:b(ee).type.isIndeterminate,onChange:ae},{default:L(()=>[w(_(e.$t("all")),1)]),_:1},8,["modelValue","indeterminate"]),x(o,{modelValue:b(ee).type.checkedTrend,"onUpdate:modelValue":l[1]||(l[1]=e=>b(ee).type.checkedTrend=e),class:"flex flex-col",onChange:te},{default:L(()=>[(v(!0),m(z,null,$(b(le),(e,l)=>(v(),y(t,{key:l,label:e.name,value:e.id},{default:L(()=>[w(_(e.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),f("div",ol,[x(s,{size:"default",class:"h-30px flex-1",onClick:q(ie,["stop"])},{default:L(()=>[w(_(e.$t("cancel")),1)]),_:1}),x(s,{size:"default",type:"primary",class:"h-30px flex-1",onClick:q(oe,["stop"])},{default:L(()=>[w(_(e.$t("confirm")),1)]),_:1})])]),_:1},8,["visible"])]),default:L(({row:l})=>[7==l.swapType?(v(),m("span",sl,_(e.$t("buy")),1)):(v(),m("span",il,_(e.$t("sell")),1))]),_:1},8,["label"])):h("",!0),x(n,{label:e.$t("token"),align:"left"},{default:L(({row:l})=>[x(k,{class:"px-10px flex items-center h-50px cursor-pointer",to:`/token/${l.token}-${l.chain}`},{default:L(()=>[f("div",nl,[x(d,{"popper-class":"tooltip-pd-0",placement:"bottom-start","show-arrow":!1,persistent:!1},{default:L(()=>[x(r,{class:"mr-8px",row:l},null,8,["row"])]),content:L(()=>[x(r,{row:l,"chain-class":"hidden","token-class":"w-240px h-240px [&&]:mr-0 rounded-16px"},null,8,["row"])]),_:2},1024),f("div",rl,[f("span",dl,[w(_(l.symbol)+" ",1),l.issue_platform?N((v(),m("img",{key:0,class:"ml-5px w-10px h-10px rounded-full",src:("formatIconTag"in e?e.formatIconTag:b(B))(l.issue_platform),alt:""},null,8,ul)),[[C,l.issue_platform]]):h("",!0)])])])]),_:2},1032,["to"])]),_:1},8,["label"]),"token"===b(g)?(v(),y(n,{key:1,label:e.$t("totalPnL"),align:"right",prop:"token_profit_rate","min-width":110},{default:L(({row:l})=>[f("div",null,[x(A,{value:null==l?void 0:l.totalProfit,signVisible:!0},{default:L(()=>[w(_(("formatNumber"in e?e.formatNumber:b(R))(Math.abs(Number((null==l?void 0:l.totalProfit)??0)),2)),1)]),_:2},1032,["value"]),f("div",cl,[(null==l?void 0:l.totalProfitRatio)>0?(v(),m("span",pl,_(("formatNumber"in e?e.formatNumber:b(R))(100*(null==l?void 0:l.totalProfitRatio)||0,2))+"% ",1)):(null==l?void 0:l.totalProfitRatio)<0?(v(),m("span",ml,_(("formatNumber"in e?e.formatNumber:b(R))(100*(null==l?void 0:l.totalProfitRatio)||0,2))+"% ",1)):(v(),m("span",vl,"0"))])])]),_:1},8,["label"])):h("",!0),"success"===b(g)||"token"===b(g)?(v(),y(n,{key:2,label:e.$t("positionsValue"),align:"right","min-width":110},{default:L(({row:l})=>[f("div",{class:H((null==l?void 0:l.value)?"":"color-text-3")}," $"+_((null==l?void 0:l.value)>0?("formatNumber"in e?e.formatNumber:b(R))((null==l?void 0:l.value)||0,2):0),3)]),_:1},8,["label"])):h("",!0),"success"===b(g)||"token"===b(g)?(v(),y(n,{key:3,label:e.$t("price"),align:"right"},{default:L(({row:l})=>[f("div",{class:H((null==l?void 0:l.price)?"":"color-text-3")}," $"+_((null==l?void 0:l.price)>0?("formatNumber"in e?e.formatNumber:b(R))((null==l?void 0:l.price)||(null==l?void 0:l.price)||0):0),3)]),_:1},8,["label"])):h("",!0),x(n,{label:e.$t("amount"),align:"right"},{default:L(({row:l})=>[f("div",{class:H((null==l?void 0:l.amount)?"":"color-text-3")},_((null==l?void 0:l.amount)>0?("formatNumber"in e?e.formatNumber:b(R))((null==l?void 0:l.amount)||0,2):0),3)]),_:1},8,["label"]),x(n,{label:e.$t("time"),align:"right","min-width":110},{default:L(({row:l})=>[w(_(Number(null==l?void 0:l.lastSwap)>0?("formatDate"in e?e.formatDate:b(j))((null==l?void 0:l.lastSwap)||0,"YYYY-MM-DD HH:mm"):"--"),1)]),_:1},8,["label"]),"failed"===b(g)?(v(),y(n,{key:4,label:e.$t("reasonFailure"),align:"right"},{default:L(({row:e})=>[f("span",fl,_(e.errorLog),1)]),_:1},8,["label"])):h("",!0),x(n,{label:e.$t("chain"),align:"right"},{default:L(({row:e})=>[f("div",xl,[x(S,{chain:e.chain,width:16},null,8,["chain"])])]),_:1},8,["label"]),"success"===b(g)?(v(),y(n,{key:5,align:"right",label:"TXN"},{default:L(({row:e})=>[f("a",yl,[x(a,{name:"custom:browser",class:"text-16px color-[--third-text] cursor-pointer",onClick:q(l=>function(e){const l=V(null==e?void 0:e.chain,null==e?void 0:e.txHash,"tx");window.open(l)}(e),["stop","self"])},null,8,["onClick"])])]),_:1})):h("",!0)]),_:1},8,["data"])])}}}),[["__scopeId","data-v-6c570428"]]),bl={class:"flex justify-between mb-10px mt-20px"},gl={class:"flex items-center gap-24px"},kl=["onClick"],wl={key:0},Nl=["infinite-scroll-disabled"],_l={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},Al={key:0},Tl=e({__name:"statisticsTable",props:{chain:{type:String,default:"bsc"},address:{type:String,default:""},followAddress:{type:String,default:""},orderId:{type:Number,default:0}},setup(e){const{copyObj:a}=l(de()),t=J(),o=e,s=E("token"),i=E(null),n=E({finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,tokenList:[],successList:[],failedList:[]}),r=c("all"),d=c(0),p=A(()=>[{title:t("copyToken"),id:"token"},{title:t("copyCompleted"),id:"success"},{title:t("copyFailed"),id:"failed"}]),y=A(()=>[o.chain,o.address]),g=A(()=>{var e;if("token"==s.value){let l=[...n.value.tokenList];return d.value&&(l=null==(e=[...n.value.tokenList])?void 0:e.filter(e=>(null==e?void 0:e.amount)>0)),l.sort((e,l)=>(l.lastSwap||0)-(e.lastSwap||0)),l}return"success"==s.value?[...n.value.successList]:[...n.value.failedList]});function k(){"token"==s.value?I():"success"==s.value?R():j()}function T({type:e}){C(),r.value=e,"success"==s.value?R():j()}const I=async()=>{if(!o.orderId)return;n.value.loading=!0;const e={walletAddress:o.address,followAddress:o.followAddress,chain:o.chain,period:"all",sortBy:"lastSwap",sortOrder:"desc"};try{const l=await me(e);n.value.tokenList=null==l?void 0:l.map(e=>({...e,chain:o.chain,value:e.holdingValue||0,amount:e.holdingAmount||0,price:(null==e?void 0:e.currentPriceUsd)||0}))}catch{n.value.tokenList=[]}finally{n.value.loading=!1}};function R(){if(!o.orderId)return;n.value.loading=!1;const e={walletAddress:o.address,chain:o.chain,id:Number(o.orderId),swapType:r.value||"all",pageSize:n.value.pageSize,pageNo:n.value.pageNo};ve(e).then(e=>{0===n.value.pageNo&&(n.value.successList=[]);const l=Array.isArray(e)?null==e?void 0:e.map(e=>{var l;return{...e,amount:new G(e.amount||0).div(10**(null==e?void 0:e.decimals)),lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.time)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?null==(l=new Date(null==e?void 0:e.time).getTime()/1e3)?void 0:l.toFixed(0):"0"}}):[];if((null==l?void 0:l.length)>0){const e=[...n.value.successList],a=l.filter(l=>e.every(e=>!(e.id===l.id&&e.chain===l.chain)));n.value.successList=[...e,...a]}n.value.finished=(null==l?void 0:l.length)<n.value.pageSize,n.value.finished||n.value.pageNo++}).catch(()=>{n.value.successList=[],n.value.error=!0}).finally(()=>{n.value.loading=!1})}function j(){if(!o.orderId)return;n.value.loading=!1;const e={walletAddress:o.address,chain:o.chain,id:Number(o.orderId),swapType:r.value||"all",pageSize:n.value.pageSize,pageNo:n.value.pageNo};fe(e).then(e=>{0===n.value.pageNo&&(n.value.failedList=[]);const l=Array.isArray(e)?null==e?void 0:e.map(e=>{var l;return{...e,amount:new G(e.amount||0).div(10**(null==e?void 0:e.decimals)),lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.time)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?null==(l=new Date(null==e?void 0:e.time).getTime()/1e3)?void 0:l.toFixed(0):"0"}}):[];if((null==l?void 0:l.length)>0){const e=[...n.value.failedList],a=l.filter(l=>e.every(e=>!(e.token===l.token&&e.chain===l.chain)));n.value.failedList=[...e,...a]}n.value.finished=(null==l?void 0:l.length)<n.value.pageSize,n.value.finished||n.value.pageNo++}).catch(()=>{n.value.failedList=[],n.value.error=!0}).finally(()=>{n.value.loading=!1})}const C=()=>{n.value.pageNo=0,n.value.finished=!1,n.value.error=!1,n.value.loading=!0};return X(y,()=>{var e;o.address&&o.chain&&(r.value="all",null==(e=i.value)||e.reset(),C(),k())}),u(()=>{o.address&&o.chain&&k()}),(l,a)=>{const o=Y,u=Q;return v(),m("div",null,[f("div",bl,[f("div",gl,[(v(!0),m(z,null,$(b(p),(e,l)=>(v(),m("a",{key:l,class:H("text-14px mb-12px cursor-pointer flex items-center decoration-none lh-20px text-center  bg-[--main-input-button-bg] rounded-4px px-12px py-8px "+(b(s)===e.id?"color-[--main-text] bg-[--primary-color]":"color-[--secondary-text]")),onClick:q(l=>(e=>{var l;s.value!=e.id&&(s.value=e.id,r.value="all",null==(l=i.value)||l.reset(),C(),"token"==s.value?I():"success"==s.value?R():j())})(e),["stop","prevent"])},_(e.title),11,kl))),128))]),"token"===b(s)?(v(),m("div",wl,[x(o,{modelValue:b(d),"onUpdate:modelValue":a[0]||(a[0]=e=>S(d)?d.value=e:null),"false-value":0,"true-value":1,class:"color-[--third-text]"},{default:L(()=>[w(_(b(t)("showPositions")),1)]),_:1},8,["modelValue"])])):h("",!0)]),N((v(),m("div",{"infinite-scroll-delay":200,"infinite-scroll-disabled":b(n).loading||b(n).finished||b(n).error,"infinite-scroll-immediate":!1,class:"relative min-h-500px bg-[--secondary-bg]","infinite-scroll-distance":"300"},[x(hl,{ref_key:"tokenList_ref",ref:i,loading:b(n).loading,tableData:b(g),address:e.address,type:b(s),onSearch:T},null,8,["loading","tableData","address","type"]),f("div",_l,[b(n).loading&&b(n).pageNo>1?(v(),m("span",Al,_(b(t)("loading")),1)):h("",!0)])],8,Nl)),[[u,k]])])}}}),Sl=U({__name:"[chain]",setup(e){const{copyObj:s,copyTradeVisible:i}=l(de()),d=ee("scrollRef"),u=t(),c=n(),p=r(),f=le("cachedChain","solana",sessionStorage),y=A(()=>{var e;return u.params.chain?u.params.chain:(null==(e=null==c?void 0:c.userInfo)?void 0:e.evmAddress)?f.value:p.chain||""}),h=A(()=>Number(u.query.id)||s.value.id),g=A(()=>u.query.followAddress||s.value.followAddress),k=A(()=>{var e;return u.query.creatorAddress?u.query.creatorAddress:(null==(e=null==c?void 0:c.userInfo)?void 0:e.evmAddress)?c.getWalletAddress(f.value):p.address||""}),{t:w}=a();o();const N=ae(oe.SCROLL_TO_TOP);function _(){d.value.scrollTo({top:0,behavior:"smooth"})}return N.on(_),te(()=>{N.off(_)}),(e,l)=>(v(),m("div",{ref_key:"scrollRef",ref:d,className:"pt-[24px] px-16px bg-[--main-bg] pb-0 w-full"},[x(al,{ref:"statisticRef",followAddress:b(g),address:b(k),chain:b(y)},null,8,["followAddress","address","chain"]),x(Tl,{ref:"statisticsTable",address:b(k),followAddress:b(g),orderId:b(h),chain:b(y)},null,8,["address","followAddress","orderId","chain"]),x(ce,{modelValue:b(i),"onUpdate:modelValue":l[0]||(l[0]=e=>S(i)?i.value=e:null)},null,8,["modelValue"])],512))}},[["__scopeId","data-v-81bd6464"]]);export{Sl as default};

import{n as l,at as a,au as e,av as t,ai as o,bm as i,D as s,E as r,aW as n,F as d,a7 as u,c as f,o as p,a as m,M as c,b as v,w as g,aa as x,t as h,e as b,fm as w,J as y,aw as _,bT as k,al as N,K as z,d as A,a8 as P,ad as R,ax as S,L as D,S as j,a2 as M,_ as Y}from"./pxHhHUe5.js";import{E as U,a as $}from"./DlhmlHT6.js";import{_ as T}from"./DqA6dxmG.js";import"./xG3n2otq.js";import"./uG3PizZo.js";import{_ as H}from"./DcJMJbTu.js";import"./DU6RBO19.js";const V={class:"w-full bg-[--main-bg]"},C={class:"py-19px px-16px flex-start gap-48px"},I={class:"text-14px"},E=["infinite-scroll-disabled"],L={key:0,class:"table-empty"},F={key:1},J={class:"flex-start"},K={class:"text-12px"},W={key:0,class:"color-[--up-color]"},Z={key:1,class:"color-[--down-color]"},q={key:2,class:"color-[--third-text]"},B={class:"text-12px color-[--third-text]"},G={class:"text-12px color-[--third-text]"},O={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},Q={key:0},X=Y(l({__name:"history",setup(l){const Y=a(),X=e(),{t:ll}=t();o(),i();const al=d({finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,list:[]}),el=r(()=>al.value.loading),tl=r(()=>M().tokenHistoryVisible?"calc(100vh - 182px)":"calc(100vh - 150px)"),ol=r(()=>(null==Y?void 0:Y.evmAddress)||(null==X?void 0:X.address)||"");function il(){sl()}function sl(){if(null==Y?void 0:Y.evmAddress){al.value.loading=!0;const l={pageSize:al.value.pageSize,pageNo:al.value.pageNo,evmAddress:null==Y?void 0:Y.evmAddress};H(l).then(l=>{0===al.value.pageNo&&(al.value.list=[]);const a=Array.isArray(l)?l:[];if((null==a?void 0:a.length)>0){const l=[...al.value.list],e=a.filter(a=>l.every(l=>!(l.id===a.id)));al.value.list=[...l,...e]}al.value.finished=(null==a?void 0:a.length)<al.value.pageSize,al.value.finished||al.value.pageNo++}).catch(()=>{al.value.list=[],al.value.error=!0}).finally(()=>{al.value.loading=!1})}else rl()}function rl(){al.value={finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,list:[]}}return s(()=>ol.value,l=>{rl(),l&&sl()}),n(()=>{al.value.pageNo=0}),(l,a)=>{const e=x,t=b,o=S,i=_,s=k,r=U,n=T,d=$,M=u("copy"),Y=w;return p(),f("div",V,[m("div",C,[v(t,{to:"/copy-trade?tab=copyTrade",class:"flex-start no-underline items-center color-[--main-text]"},{default:g(()=>[v(e,{name:"majesticons:arrow-left-line",class:"mr-12px"}),m("span",I,h(l.$t("historyCopyTrade")),1)]),_:1})]),c((p(),f("div",{"infinite-scroll-delay":200,"infinite-scroll-disabled":y(al).loading||y(al).finished||y(al).error,"infinite-scroll-immediate":!0,class:"relative min-h-500px bg-[--secondary-bg]","infinite-scroll-distance":"300"},[v(d,{ref:"tableRef",data:y(al).list,"header-cell-style":{fontSize:"12px"},fit:"",style:D({height:`${y(tl)}`})},{empty:g(()=>{var l,a;return[y(el)||0!=(null==(a=null==(l=y(al))?void 0:l.list)?void 0:a.length)?(p(),f("span",F)):(p(),f("div",L,[v(o)]))]}),default:g(()=>[v(r,{label:"地址",align:"left",width:"225",fixed:"left",prop:"token_profit_rate","min-width":110},{default:g(({row:l})=>[m("div",J,[v(i,{class:"mr-10px",iconSize:"24px",iconChainSize:"14px",wallet_logo:{url:null==l?void 0:l.followAddress,logo:null==l?void 0:l.followIconUrl},address:l.followAddress},null,8,["wallet_logo","address"]),v(s,{addressClass:"token-symbol ellipsis color-[--main-text]",addressStyle:"max-width: 70px",showAddressTitle:"",address:l.followAddress,chain:l.chain,remark:l.remark||l.followName,wallet_logo:{url:null==l?void 0:l.followAddress,logo:null==l?void 0:l.followIconUrl},formatAddress:l=>"*"+(null==l?void 0:l.slice(-5)),onUpdateRemark:({remark:a})=>l.remark=a},null,8,["address","chain","remark","wallet_logo","formatAddress","onUpdateRemark"]),c(v(e,{name:"bxs:copy",class:"text-12px cursor-pointer color-[--third-text] ml-5px",onClick:a[0]||(a[0]=N(()=>{},["stop","prevent"]))},null,512),[[M,l.followAddress]])])]),_:1}),v(r,{label:l.$t("totalPnL"),align:"right",prop:"token_profit_rate","min-width":110},{default:g(({row:a})=>[m("div",null,[m("div",{class:z((null==a?void 0:a.totalProfit)?"":"color-text-3")},[v(n,{value:null==a?void 0:a.totalProfit,signVisible:!0},{default:g(()=>[A(h(("formatNumber"in l?l.formatNumber:y(P))(Math.abs((null==a?void 0:a.totalProfit)??0),2)),1)]),_:2},1032,["value"])],2),m("div",K,[(null==a?void 0:a.totalProfitRatio)>0?(p(),f("span",W,h(("formatNumber"in l?l.formatNumber:y(P))((null==a?void 0:a.totalProfitRatio)||0,2))+"% ",1)):(null==a?void 0:a.totalProfitRatio)<0?(p(),f("span",Z,h(("formatNumber"in l?l.formatNumber:y(P))((null==a?void 0:a.totalProfitRatio)||0,2))+"% ",1)):(p(),f("span",q,"0"))])])]),_:1},8,["label"]),v(r,{label:l.$t("unrealizedProfit"),align:"right",prop:"token_profit_rate","min-width":110},{default:g(({row:a})=>[m("div",null,[m("div",{class:z((null==a?void 0:a.profitUnrealized)?"":"color-text-3")},[v(n,{value:null==a?void 0:a.profitUnrealized,signVisible:!0},{default:g(()=>[A(h(("formatNumber"in l?l.formatNumber:y(P))(Math.abs((null==a?void 0:a.profitUnrealized)??0),2)),1)]),_:2},1032,["value"])],2)])]),_:1},8,["label"]),v(r,{label:l.$t("realizedProfit"),align:"right",prop:"token_profit_rate","min-width":110},{default:g(({row:a})=>[m("div",null,[m("div",{class:z((null==a?void 0:a.profitRealized)?"":"color-text-3")},[v(n,{value:null==a?void 0:a.profitRealized,signVisible:!0},{default:g(()=>[A(h(("formatNumber"in l?l.formatNumber:y(P))(Math.abs((null==a?void 0:a.profitRealized)??0),2)),1)]),_:2},1032,["value"])],2)])]),_:1},8,["label"]),v(r,{label:l.$t("time"),align:"right","min-width":110},{default:g(({row:e})=>[m("div",null,[m("span",B,h(("formatDate"in l?l.formatDate:y(R))(null==e?void 0:e.createTime,"YYYY-MM-DD HH:mm")),1),a[1]||(a[1]=A(" ~ ",-1)),m("span",G,h(("formatDate"in l?l.formatDate:y(R))(null==e?void 0:e.finishTime,"YYYY-MM-DD HH:mm")),1)])]),_:1},8,["label"])]),_:1},8,["data","style"]),m("div",O,[y(al).loading&&y(al).pageNo>1?(p(),f("span",Q,h(l.$t("loading")),1)):j("",!0)])],8,E)),[[Y,il]])])}}}),[["__scopeId","data-v-c9ee9ffc"]]);export{X as default};

import{gE as e,h5 as a,g as t,C as l,gJ as i,U as n,h as o,k as r,hc as s,m as u,dE as d,D as m,hs as v,F as p,E as c,B as g,G as f,Z as b,$ as h,n as V,q as w,ak as y,az as x,c as S,o as k,b as B,w as C,a as E,K as M,J as L,t as z,W as D,L as P,cB as N,i as T,r as F,v as I,ay as Y,gQ as X,Y as _,aW as U,p as W,y as $,s as j,a0 as K,H as R,S as O,a5 as A,a6 as J,al as q,a1 as G}from"./pxHhHUe5.js";import{E as H}from"./BwPtREp8.js";import{c as Q}from"./Ss6PgMLe.js";const Z=Symbol("sliderContextKey"),ee=t({modelValue:{type:r([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:u,inputSize:u,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:r(Function),default:void 0},disabled:{type:Boolean,default:void 0},range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:r(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:s,default:"top"},marks:{type:r(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...o(["ariaLabel"])}),ae=t=>e(t)||a(t)&&t.every(e),te={[n]:ae,[i]:ae,[l]:ae},le=t({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:s,default:"top"}}),ie=(e,a,t)=>{const{disabled:l,min:i,max:o,step:r,showTooltip:s,persistent:u,precision:V,sliderSize:w,formatTooltip:y,emitChange:x,resetSize:S,updateDragging:k}=d(Z),{tooltip:B,tooltipVisible:C,formatValue:E,displayTooltip:M,hideTooltip:L}=((e,a,t)=>{const l=p(),i=p(!1),n=c(()=>a.value instanceof Function),o=c(()=>n.value&&a.value(e.modelValue)||e.modelValue),r=g(()=>{t.value&&(i.value=!0)},50),s=g(()=>{t.value&&(i.value=!1)},50);return{tooltip:l,tooltipVisible:i,formatValue:o,displayTooltip:r,hideTooltip:s}})(e,y,s),z=p(),D=c(()=>(e.modelValue-i.value)/(o.value-i.value)*100+"%"),P=c(()=>e.vertical?{bottom:D.value}:{left:D.value}),N=e=>{l.value||(e.preventDefault(),I(e),window.addEventListener("mousemove",Y),window.addEventListener("touchmove",Y),window.addEventListener("mouseup",X),window.addEventListener("touchend",X),window.addEventListener("contextmenu",X),z.value.focus())},T=e=>{l.value||(a.newPosition=Number.parseFloat(D.value)+e/(o.value-i.value)*100,_(a.newPosition),x())},F=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},I=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=F(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(D.value),a.newPosition=a.startPosition},Y=t=>{if(a.dragging){let l;a.isClick=!1,M(),S();const{clientX:i,clientY:n}=F(t);e.vertical?(a.currentY=n,l=(a.startY-a.currentY)/w.value*100):(a.currentX=i,l=(a.currentX-a.startX)/w.value*100),a.newPosition=a.startPosition+l,_(a.newPosition)}},X=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||L(),a.isClick||_(a.newPosition),x()},0),window.removeEventListener("mousemove",Y),window.removeEventListener("touchmove",Y),window.removeEventListener("mouseup",X),window.removeEventListener("touchend",X),window.removeEventListener("contextmenu",X))},_=async l=>{if(null===l||Number.isNaN(+l))return;l=Q(l,0,100);const s=Math.floor((o.value-i.value)/r.value),u=s*r.value/(o.value-i.value)*100,d=u+(100-u)/2;let m;if(l<u){const e=u/s,a=Math.round(l/e);m=i.value+a*r.value}else m=l<d?i.value+s*r.value:o.value;m=Number.parseFloat(m.toFixed(V.value)),m!==e.modelValue&&t(n,m),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await f(),a.dragging&&M(),B.value.updatePopper()};return m(()=>a.dragging,e=>{k(e)}),v(z,"touchstart",N,{passive:!1}),{disabled:l,button:z,tooltip:B,tooltipVisible:C,showTooltip:s,persistent:u,wrapperStyle:P,formatValue:E,handleMouseEnter:()=>{a.hovering=!0,M()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||L()},onButtonDown:N,onKeyDown:e=>{let a=!0;switch(b(e)){case h.left:case h.down:T(-r.value);break;case h.right:case h.up:T(r.value);break;case h.home:l.value||(_(0),x());break;case h.end:l.value||(_(100),x());break;case h.pageDown:T(4*-r.value);break;case h.pageUp:T(4*r.value);break;default:a=!1}a&&e.preventDefault()},setPosition:_}},ne=["tabindex"];var oe=V({name:"ElSliderButton",__name:"button",props:le,emits:{[n]:a=>e(a)},setup(e,{expose:a,emit:t}){const l=e,i=t,n=w("slider"),o=y({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),r=c(()=>!!m.value&&v.value),{disabled:s,button:u,tooltip:d,showTooltip:m,persistent:v,tooltipVisible:p,wrapperStyle:g,formatValue:f,handleMouseEnter:b,handleMouseLeave:h,onButtonDown:V,onKeyDown:N,setPosition:T}=ie(l,o,i),{hovering:F,dragging:I}=x(o);return a({onButtonDown:V,onKeyDown:N,setPosition:T,hovering:F,dragging:I}),(e,a)=>(k(),S("div",{ref_key:"button",ref:u,class:M([L(n).e("button-wrapper"),{hover:L(F),dragging:L(I)}]),style:P(L(g)),tabindex:L(s)?void 0:0,onMouseenter:a[0]||(a[0]=(...e)=>L(b)&&L(b)(...e)),onMouseleave:a[1]||(a[1]=(...e)=>L(h)&&L(h)(...e)),onMousedown:a[2]||(a[2]=(...e)=>L(V)&&L(V)(...e)),onFocus:a[3]||(a[3]=(...e)=>L(b)&&L(b)(...e)),onBlur:a[4]||(a[4]=(...e)=>L(h)&&L(h)(...e)),onKeydown:a[5]||(a[5]=(...e)=>L(N)&&L(N)(...e))},[B(L(D),{ref_key:"tooltip",ref:d,visible:L(p),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!L(m),persistent:r.value},{content:C(()=>[E("span",null,z(L(f)),1)]),default:C(()=>[E("div",{class:M([L(n).e("button"),{hover:L(F),dragging:L(I)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,ne))}});var re=V({name:"ElSliderMarker",props:t({mark:{type:r([String,Object]),default:void 0}}),setup(e){const a=w("slider"),t=c(()=>T(e.mark)?e.mark:e.mark.label),l=c(()=>T(e.mark)?void 0:e.mark.style);return()=>N("div",{class:a.e("marks-text"),style:l.value},t.value)}});const se=(e,a,t)=>{const{formItem:o}=F(),r=Y(),s=p(),u=p(),d={firstButton:s,secondButton:u},m=I(),v=c(()=>Math.min(a.firstValue,a.secondValue)),g=c(()=>Math.max(a.firstValue,a.secondValue)),b=c(()=>e.range?100*(g.value-v.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%"),h=c(()=>e.range?100*(v.value-e.min)/(e.max-e.min)+"%":"0%"),V=c(()=>e.vertical?{height:e.height}:{}),w=c(()=>e.vertical?{height:b.value,bottom:h.value}:{width:b.value,left:h.value}),y=()=>{if(r.value){const t=r.value.getBoundingClientRect();a.sliderSize=t[e.vertical?"height":"width"]}},x=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return s;let i;return i=Math.abs(v.value-l)<Math.abs(g.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",d[i]})(t);return l.value.setPosition(t),l},S=e=>{t(n,e),t(i,e)},k=async()=>{await f(),t(l,e.range?[v.value,g.value]:e.modelValue)},B=t=>{var l,i,n,o,s,u;if(m.value||a.dragging)return;y();let d=0;if(e.vertical){const e=null!=(n=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?n:t.clientY;d=(r.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(o=t.touches)?void 0:o.item(0))?void 0:s.clientX)?u:t.clientX)-r.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:x(d)};return{elFormItem:o,slider:r,firstButton:s,secondButton:u,sliderDisabled:m,minValue:v,maxValue:g,runwayStyle:V,barStyle:w,resetSize:y,setPosition:x,emitChange:k,onSliderWrapperPrevent:e=>{var a,t;((null==(a=d.firstButton.value)?void 0:a.dragging)||(null==(t=d.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{B(e)&&k()},onSliderDown:async e=>{const a=B(e);a&&(await f(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(m.value||a.dragging)return;x(e)&&k()},setFirstValue:t=>{a.firstValue=null!=t?t:e.min,S(e.range?[v.value,g.value]:null!=t?t:e.min)},setSecondValue:t=>{a.secondValue=t,e.range&&S([v.value,g.value])}}},ue=["id","role","aria-label","aria-labelledby"],de={key:1};const me=G(V({name:"ElSlider",__name:"slider",props:ee,emits:te,setup(t,{expose:l,emit:o}){const r=t,s=o,u=w("slider"),{t:d}=W(),g=y({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:h,firstButton:V,secondButton:C,sliderDisabled:z,minValue:D,maxValue:N,runwayStyle:T,barStyle:F,resetSize:I,emitChange:Y,onSliderWrapperPrevent:G,onSliderClick:Q,onSliderDown:ee,onSliderMarkerDown:ae,setFirstValue:te,setSecondValue:le}=se(r,g,s),{stops:ie,getStopStyle:ne}=((e,a,t,l)=>({stops:c(()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=Math.ceil((e.max-e.min)/e.step),n=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map((e,a)=>(a+1)*n);return e.range?o.filter(a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min)):o.filter(t=>t>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(r,g,D,N),{inputId:me,isLabeledByFormItem:ve}=$(r,{formItemContext:b}),pe=j(),ce=c(()=>r.inputSize||pe.value),ge=c(()=>r.ariaLabel||d("el.slider.defaultLabel",{min:r.min,max:r.max})),fe=c(()=>r.range?r.rangeStartLabel||d("el.slider.defaultRangeStartLabel"):ge.value),be=c(()=>r.formatValueText?r.formatValueText(ke.value):`${ke.value}`),he=c(()=>r.rangeEndLabel||d("el.slider.defaultRangeEndLabel")),Ve=c(()=>r.formatValueText?r.formatValueText(Be.value):`${Be.value}`),we=c(()=>[u.b(),u.m(pe.value),u.is("vertical",r.vertical),{[u.m("with-input")]:r.showInput}]),ye=(e=>c(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((e,a)=>e-a).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]})):[]))(r);((t,l,o,r,s,u)=>{const d=e=>{s(n,e),s(i,e)},v=()=>t.range?![o.value,r.value].every((e,a)=>e===l.oldValue[a]):t.modelValue!==l.oldValue,p=()=>{var i,n;t.min>t.max&&X("Slider","min should not be greater than max.");const o=t.modelValue;t.range&&a(o)?o[1]<t.min?d([t.min,t.min]):o[0]>t.max?d([t.max,t.max]):o[0]<t.min?d([t.min,o[1]]):o[1]>t.max?d([o[0],t.max]):(l.firstValue=o[0],l.secondValue=o[1],v()&&(t.validateEvent&&(null==(i=null==u?void 0:u.validate)||i.call(u,"change").catch(e=>_())),l.oldValue=o.slice())):t.range||!e(o)||Number.isNaN(o)||(o<t.min?d(t.min):o>t.max?d(t.max):(l.firstValue=o,v()&&(t.validateEvent&&(null==(n=null==u?void 0:u.validate)||n.call(u,"change").catch(e=>_())),l.oldValue=o)))};p(),m(()=>l.dragging,e=>{e||p()}),m(()=>t.modelValue,(e,t)=>{l.dragging||a(e)&&a(t)&&e.every((e,a)=>e===t[a])&&l.firstValue===e[0]&&l.secondValue===e[1]||p()},{deep:!0}),m(()=>[t.min,t.max],()=>{p()})})(r,g,D,N,s,b);const xe=c(()=>{const e=[r.min,r.max,r.step].map(e=>{const a=`${e}`.split(".")[1];return a?a.length:0});return Math.max.apply(null,e)}),{sliderWrapper:Se}=((t,l,i)=>{const n=p();return U(async()=>{t.range?(a(t.modelValue)?(l.firstValue=Math.max(t.min,t.modelValue[0]),l.secondValue=Math.min(t.max,t.modelValue[1])):(l.firstValue=t.min,l.secondValue=t.max),l.oldValue=[l.firstValue,l.secondValue]):(!e(t.modelValue)||Number.isNaN(t.modelValue)?l.firstValue=t.min:l.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),l.oldValue=l.firstValue),v(window,"resize",i),await f(),i()}),{sliderWrapper:n}})(r,g,I),{firstValue:ke,secondValue:Be,sliderSize:Ce}=x(g);return v(Se,"touchstart",G,{passive:!1}),v(Se,"touchmove",G,{passive:!1}),K(Z,{...x(r),sliderSize:Ce,disabled:z,precision:xe,emitChange:Y,resetSize:I,updateDragging:e=>{g.dragging=e}}),l({onSliderClick:Q}),(e,a)=>{var t,l;return k(),S("div",{id:e.range?L(me):void 0,ref_key:"sliderWrapper",ref:Se,class:M(we.value),role:e.range?"group":void 0,"aria-label":e.range&&!L(ve)?ge.value:void 0,"aria-labelledby":e.range&&L(ve)?null==(t=L(b))?void 0:t.labelId:void 0},[E("div",{ref_key:"slider",ref:h,class:M([L(u).e("runway"),{"show-input":e.showInput&&!e.range},L(u).is("disabled",L(z))]),style:P(L(T)),onMousedown:a[0]||(a[0]=(...e)=>L(ee)&&L(ee)(...e)),onTouchstartPassive:a[1]||(a[1]=(...e)=>L(ee)&&L(ee)(...e))},[E("div",{class:M(L(u).e("bar")),style:P(L(F))},null,6),B(oe,{id:e.range?void 0:L(me),ref_key:"firstButton",ref:V,"model-value":L(ke),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!L(ve)?fe.value:void 0,"aria-labelledby":!e.range&&L(ve)?null==(l=L(b))?void 0:l.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?L(Be):e.max,"aria-valuenow":L(ke),"aria-valuetext":be.value,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":L(z),"onUpdate:modelValue":L(te)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(k(),R(oe,{key:0,ref_key:"secondButton",ref:C,"model-value":L(Be),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":he.value,"aria-valuemin":L(ke),"aria-valuemax":e.max,"aria-valuenow":L(Be),"aria-valuetext":Ve.value,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":L(z),"onUpdate:modelValue":L(le)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):O("v-if",!0),e.showStops?(k(),S("div",de,[(k(!0),S(A,null,J(L(ie),(e,a)=>(k(),S("div",{key:a,class:M(L(u).e("stop")),style:P(L(ne)(e))},null,6))),128))])):O("v-if",!0),L(ye).length>0?(k(),S(A,{key:2},[E("div",null,[(k(!0),S(A,null,J(L(ye),(e,a)=>(k(),S("div",{key:a,style:P(L(ne)(e.position)),class:M([L(u).e("stop"),L(u).e("marks-stop")])},null,6))),128))]),E("div",{class:M(L(u).e("marks"))},[(k(!0),S(A,null,J(L(ye),(e,a)=>(k(),R(L(re),{key:a,mark:e.mark,style:P(L(ne)(e.position)),onMousedown:q(a=>L(ae)(e.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):O("v-if",!0)],38),e.showInput&&!e.range?(k(),R(L(H),{key:0,ref:"input","model-value":L(ke),class:M(L(u).e("input")),step:e.step,disabled:L(z),controls:e.showInputControls,min:e.min,max:e.max,precision:xe.value,size:ce.value,"onUpdate:modelValue":L(te),onChange:L(Y)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):O("v-if",!0)],10,ue)}}}));export{me as E};
